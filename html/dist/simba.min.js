(function(t,e,n,i){"use strict";var r=["","webkit","moz","MS","ms","o"];var o=e.createElement("div");var s="function";var a=Math.round;var u=Math.abs;var c=Date.now;function l(t,e,n){return setTimeout(m(t,n),e)}function f(t,e,n){if(Array.isArray(t)){h(t,n[e],n);return true}return false}function h(t,e,n){var r;if(!t){return}if(t.forEach){t.forEach(e,n)}else if(t.length!==i){r=0;while(r<t.length){e.call(n,t[r],r,t);r++}}else{for(r in t){t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}}}function p(t,e,n){var r=Object.keys(e);var o=0;while(o<r.length){if(!n||n&&t[r[o]]===i){t[r[o]]=e[r[o]]}o++}return t}function d(t,e){return p(t,e,true)}function v(t,e,n){var i=e.prototype,r;r=t.prototype=Object.create(i);r.constructor=t;r._super=i;if(n){p(r,n)}}function m(t,e){return function n(){return t.apply(e,arguments)}}function g(t,e){if(typeof t==s){return t.apply(e?e[0]||i:i,e)}return t}function y(t,e){return t===i?e:t}function w(t,e,n){h(E(e),function(e){t.addEventListener(e,n,false)})}function b(t,e,n){h(E(e),function(e){t.removeEventListener(e,n,false)})}function x(t,e){while(t){if(t==e){return true}t=t.parentNode}return false}function M(t,e){return t.indexOf(e)>-1}function E(t){return t.trim().split(/\s+/g)}function _(t,e,n){if(t.indexOf&&!n){return t.indexOf(e)}else{var i=0;while(i<t.length){if(n&&t[i][n]==e||!n&&t[i]===e){return i}i++}return-1}}function T(t){return Array.prototype.slice.call(t,0)}function C(t,e,n){var i=[];var r=[];var o=0;while(o<t.length){var s=e?t[o][e]:t[o];if(_(r,s)<0){i.push(t[o])}r[o]=s;o++}if(n){if(!e){i=i.sort()}else{i=i.sort(function a(t,n){return t[e]>n[e]})}}return i}function S(t,e){var n,o;var s=e[0].toUpperCase()+e.slice(1);var a=0;while(a<r.length){n=r[a];o=n?n+s:e;if(o in t){return o}a++}return i}var A=1;function P(){return A++}function k(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var I=/mobile|tablet|ip(ad|hone|od)|android/i;var F="ontouchstart"in t;var z=S(t,"PointerEvent")!==i;var O=F&&I.test(navigator.userAgent);var j="touch";var N="pen";var D="mouse";var q="kinect";var L=25;var R=1;var $=2;var V=4;var H=8;var B=1;var W=2;var G=4;var J=8;var X=16;var Y=W|G;var Z=J|X;var U=Y|Z;var Q=["x","y"];var K=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t;this.callback=e;this.element=t.element;this.target=t.options.inputTarget;this.domHandler=function(e){if(g(t.options.enable,[t])){n.handler(e)}};this.init()}tt.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler);this.evTarget&&w(this.target,this.evTarget,this.domHandler);this.evWin&&w(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler);this.evTarget&&b(this.target,this.evTarget,this.domHandler);this.evWin&&b(k(this.element),this.evWin,this.domHandler)}};function et(t){var e;var n=t.options.inputClass;if(n){e=n}else if(z){e=Mt}else if(O){e=kt}else if(!F){e=gt}else{e=Ft}return new e(t,nt)}function nt(t,e,n){var i=n.pointers.length;var r=n.changedPointers.length;var o=e&R&&i-r===0;var s=e&(V|H)&&i-r===0;n.isFirst=!!o;n.isFinal=!!s;if(o){t.session={}}n.eventType=e;it(t,n);t.emit("hammer.input",n);t.recognize(n);t.session.prevInput=n}function it(t,e){var n=t.session;var i=e.pointers;var r=i.length;if(!n.firstInput){n.firstInput=st(e)}if(r>1&&!n.firstMultiple){n.firstMultiple=st(e)}else if(r===1){n.firstMultiple=false}var o=n.firstInput;var s=n.firstMultiple;var a=s?s.center:o.center;var u=e.center=at(i);e.timeStamp=c();e.deltaTime=e.timeStamp-o.timeStamp;e.angle=ft(a,u);e.distance=lt(a,u);rt(n,e);e.offsetDirection=ct(e.deltaX,e.deltaY);e.scale=s?pt(s.pointers,i):1;e.rotation=s?ht(s.pointers,i):0;ot(n,e);var l=t.element;if(x(e.srcEvent.target,l)){l=e.srcEvent.target}e.target=l}function rt(t,e){var n=e.center;var i=t.offsetDelta||{};var r=t.prevDelta||{};var o=t.prevInput||{};if(e.eventType===R||o.eventType===V){r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0};i=t.offsetDelta={x:n.x,y:n.y}}e.deltaX=r.x+(n.x-i.x);e.deltaY=r.y+(n.y-i.y)}function ot(t,e){var n=t.lastInterval||e,r=e.timeStamp-n.timeStamp,o,s,a,c;if(e.eventType!=H&&(r>L||n.velocity===i)){var l=n.deltaX-e.deltaX;var f=n.deltaY-e.deltaY;var h=ut(r,l,f);s=h.x;a=h.y;o=u(h.x)>u(h.y)?h.x:h.y;c=ct(l,f);t.lastInterval=e}else{o=n.velocity;s=n.velocityX;a=n.velocityY;c=n.direction}e.velocity=o;e.velocityX=s;e.velocityY=a;e.direction=c}function st(t){var e=[];var n=0;while(n<t.pointers.length){e[n]={clientX:a(t.pointers[n].clientX),clientY:a(t.pointers[n].clientY)};n++}return{timeStamp:c(),pointers:e,center:at(e),deltaX:t.deltaX,deltaY:t.deltaY}}function at(t){var e=t.length;if(e===1){return{x:a(t[0].clientX),y:a(t[0].clientY)}}var n=0,i=0,r=0;while(r<e){n+=t[r].clientX;i+=t[r].clientY;r++}return{x:a(n/e),y:a(i/e)}}function ut(t,e,n){return{x:e/t||0,y:n/t||0}}function ct(t,e){if(t===e){return B}if(u(t)>=u(e)){return t>0?W:G}return e>0?J:X}function lt(t,e,n){if(!n){n=Q}var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function ft(t,e,n){if(!n){n=Q}var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.atan2(r,i)*180/Math.PI}function ht(t,e){return ft(e[1],e[0],K)-ft(t[1],t[0],K)}function pt(t,e){return lt(e[0],e[1],K)/lt(t[0],t[1],K)}var dt={mousedown:R,mousemove:$,mouseup:V};var vt="mousedown";var mt="mousemove mouseup";function gt(){this.evEl=vt;this.evWin=mt;this.allow=true;this.pressed=false;tt.apply(this,arguments)}v(gt,tt,{handler:function pe(t){var e=dt[t.type];if(e&R&&t.button===0){this.pressed=true}if(e&$&&t.which!==1){e=V}if(!this.pressed||!this.allow){return}if(e&V){this.pressed=false}this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:D,srcEvent:t})}});var yt={pointerdown:R,pointermove:$,pointerup:V,pointercancel:H,pointerout:H};var wt={2:j,3:N,4:D,5:q};var bt="pointerdown";var xt="pointermove pointerup pointercancel";if(t.MSPointerEvent){bt="MSPointerDown";xt="MSPointerMove MSPointerUp MSPointerCancel"}function Mt(){this.evEl=bt;this.evWin=xt;tt.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}v(Mt,tt,{handler:function de(t){var e=this.store;var n=false;var i=t.type.toLowerCase().replace("ms","");var r=yt[i];var o=wt[t.pointerType]||t.pointerType;var s=o==j;var a=_(e,t.pointerId,"pointerId");if(r&R&&(t.button===0||s)){if(a<0){e.push(t);a=e.length-1}}else if(r&(V|H)){n=true}if(a<0){return}e[a]=t;this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t});if(n){e.splice(a,1)}}});var Et={touchstart:R,touchmove:$,touchend:V,touchcancel:H};var _t="touchstart";var Tt="touchstart touchmove touchend touchcancel";function Ct(){this.evTarget=_t;this.evWin=Tt;this.started=false;tt.apply(this,arguments)}v(Ct,tt,{handler:function ve(t){var e=Et[t.type];if(e===R){this.started=true}if(!this.started){return}var n=St.call(this,t,e);if(e&(V|H)&&n[0].length-n[1].length===0){this.started=false}this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}});function St(t,e){var n=T(t.touches);var i=T(t.changedTouches);if(e&(V|H)){n=C(n.concat(i),"identifier",true)}return[n,i]}var At={touchstart:R,touchmove:$,touchend:V,touchcancel:H};var Pt="touchstart touchmove touchend touchcancel";function kt(){this.evTarget=Pt;this.targetIds={};tt.apply(this,arguments)}v(kt,tt,{handler:function me(t){var e=At[t.type];var n=It.call(this,t,e);if(!n){return}this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}});function It(t,e){var n=T(t.touches);var i=this.targetIds;if(e&(R|$)&&n.length===1){i[n[0].identifier]=true;return[n,n]}var r,o,s=T(t.changedTouches),a=[],u=this.target;o=n.filter(function(t){return x(t.target,u)});if(e===R){r=0;while(r<o.length){i[o[r].identifier]=true;r++}}r=0;while(r<s.length){if(i[s[r].identifier]){a.push(s[r])}if(e&(V|H)){delete i[s[r].identifier]}r++}if(!a.length){return}return[C(o.concat(a),"identifier",true),a]}function Ft(){tt.apply(this,arguments);var t=m(this.handler,this);this.touch=new kt(this.manager,t);this.mouse=new gt(this.manager,t)}v(Ft,tt,{handler:function ge(t,e,n){var i=n.pointerType==j,r=n.pointerType==D;if(i){this.mouse.allow=false}else if(r&&!this.mouse.allow){return}if(e&(V|H)){this.mouse.allow=true}this.callback(t,e,n)},destroy:function ye(){this.touch.destroy();this.mouse.destroy()}});var zt=S(o.style,"touchAction");var Ot=zt!==i;var jt="compute";var Nt="auto";var Dt="manipulation";var qt="none";var Lt="pan-x";var Rt="pan-y";function $t(t,e){this.manager=t;this.set(e)}$t.prototype={set:function(t){if(t==jt){t=this.compute()}if(Ot){this.manager.element.style[zt]=t}this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];h(this.manager.recognizers,function(e){if(g(e.options.enable,[e])){t=t.concat(e.getTouchAction())}});return Vt(t.join(" "))},preventDefaults:function(t){if(Ot){return}var e=t.srcEvent;var n=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}var i=this.actions;var r=M(i,qt);var o=M(i,Rt);var s=M(i,Lt);if(r||o&&n&Y||s&&n&Z){return this.preventSrc(e)}},preventSrc:function(t){this.manager.session.prevented=true;t.preventDefault()}};function Vt(t){if(M(t,qt)){return qt}var e=M(t,Lt);var n=M(t,Rt);if(e&&n){return Lt+" "+Rt}if(e||n){return e?Lt:Rt}if(M(t,Dt)){return Dt}return Nt}var Ht=1;var Bt=2;var Wt=4;var Gt=8;var Jt=Gt;var Xt=16;var Yt=32;function Zt(t){this.id=P();this.manager=null;this.options=d(t||{},this.defaults);this.options.enable=y(this.options.enable,true);this.state=Ht;this.simultaneous={};this.requireFail=[]}Zt.prototype={defaults:{},set:function(t){p(this.options,t);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(t){if(f(t,"recognizeWith",this)){return this}var e=this.simultaneous;t=Kt(t,this);if(!e[t.id]){e[t.id]=t;t.recognizeWith(this)}return this},dropRecognizeWith:function(t){if(f(t,"dropRecognizeWith",this)){return this}t=Kt(t,this);delete this.simultaneous[t.id];return this},requireFailure:function(t){if(f(t,"requireFailure",this)){return this}var e=this.requireFail;t=Kt(t,this);if(_(e,t)===-1){e.push(t);t.requireFailure(this)}return this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this)){return this}t=Kt(t,this);var e=_(this.requireFail,t);if(e>-1){this.requireFail.splice(e,1)}return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this;var n=this.state;function i(i){e.manager.emit(e.options.event+(i?Ut(n):""),t)}if(n<Gt){i(true)}i();if(n>=Gt){i(true)}},tryEmit:function(t){if(this.canEmit()){return this.emit(t)}this.state=Yt},canEmit:function(){var t=0;while(t<this.requireFail.length){if(!(this.requireFail[t].state&(Yt|Ht))){return false}t++}return true},recognize:function(t){var e=p({},t);if(!g(this.options.enable,[this,e])){this.reset();this.state=Yt;return}if(this.state&(Jt|Xt|Yt)){this.state=Ht}this.state=this.process(e);if(this.state&(Bt|Wt|Gt|Xt)){this.tryEmit(e)}},process:function(t){},getTouchAction:function(){},reset:function(){}};function Ut(t){if(t&Xt){return"cancel"}else if(t&Gt){return"end"}else if(t&Wt){return"move"}else if(t&Bt){return"start"}return""}function Qt(t){if(t==X){return"down"}else if(t==J){return"up"}else if(t==W){return"left"}else if(t==G){return"right"}return""}function Kt(t,e){var n=e.manager;if(n){return n.get(t)}return t}function te(){Zt.apply(this,arguments)}v(te,Zt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return e===0||t.pointers.length===e},process:function(t){var e=this.state;var n=t.eventType;var i=e&(Bt|Wt);var r=this.attrTest(t);if(i&&(n&H||!r)){return e|Xt}else if(i||r){if(n&V){return e|Gt}else if(!(e&Bt)){return Bt}return e|Wt}return Yt}});function ee(){te.apply(this,arguments);this.pX=null;this.pY=null}v(ee,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:U},getTouchAction:function(){var t=this.options.direction;var e=[];if(t&Y){e.push(Rt)}if(t&Z){e.push(Lt)}return e},directionTest:function(t){var e=this.options;var n=true;var i=t.distance;var r=t.direction;var o=t.deltaX;var s=t.deltaY;if(!(r&e.direction)){if(e.direction&Y){r=o===0?B:o<0?W:G;n=o!=this.pX;i=Math.abs(t.deltaX)}else{r=s===0?B:s<0?J:X;n=s!=this.pY;i=Math.abs(t.deltaY)}}t.direction=r;return n&&i>e.threshold&&r&e.direction},attrTest:function(t){return te.prototype.attrTest.call(this,t)&&(this.state&Bt||!(this.state&Bt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX;this.pY=t.deltaY;var e=Qt(t.direction);if(e){this.manager.emit(this.options.event+e,t)}this._super.emit.call(this,t)}});function ne(){te.apply(this,arguments)}v(ne,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Bt)},emit:function(t){this._super.emit.call(this,t);if(t.scale!==1){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}});function ie(){Zt.apply(this,arguments);this._timer=null;this._input=null}v(ie,Zt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Nt]},process:function(t){var e=this.options;var n=t.pointers.length===e.pointers;var i=t.distance<e.threshold;var r=t.deltaTime>e.time;this._input=t;if(!i||!n||t.eventType&(V|H)&&!r){this.reset()}else if(t.eventType&R){this.reset();this._timer=l(function(){this.state=Jt;this.tryEmit()},e.time,this)}else if(t.eventType&V){return Jt}return Yt},reset:function(){clearTimeout(this._timer)},emit:function(t){if(this.state!==Jt){return}if(t&&t.eventType&V){this.manager.emit(this.options.event+"up",t)}else{this._input.timeStamp=c();this.manager.emit(this.options.event,this._input)}}});function re(){te.apply(this,arguments)}v(re,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Bt)}});function oe(){te.apply(this,arguments)}v(oe,te,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Y|Z,pointers:1},getTouchAction:function(){return ee.prototype.getTouchAction.call(this)},attrTest:function(t){var e=this.options.direction;var n;if(e&(Y|Z)){n=t.velocity}else if(e&Y){n=t.velocityX}else if(e&Z){n=t.velocityY}return this._super.attrTest.call(this,t)&&e&t.direction&&t.distance>this.options.threshold&&u(n)>this.options.velocity&&t.eventType&V},emit:function(t){var e=Qt(t.direction);if(e){this.manager.emit(this.options.event+e,t)}this.manager.emit(this.options.event,t)}});function se(){Zt.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}v(se,Zt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options;var n=t.pointers.length===e.pointers;var i=t.distance<e.threshold;var r=t.deltaTime<e.time;this.reset();if(t.eventType&R&&this.count===0){return this.failTimeout()}if(i&&r&&n){if(t.eventType!=V){return this.failTimeout()}var o=this.pTime?t.timeStamp-this.pTime<e.interval:true;var s=!this.pCenter||lt(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp;this.pCenter=t.center;if(!s||!o){this.count=1}else{this.count+=1}this._input=t;var a=this.count%e.taps;if(a===0){if(!this.hasRequireFailures()){return Jt}else{this._timer=l(function(){this.state=Jt;this.tryEmit()},e.interval,this);return Bt}}}return Yt},failTimeout:function(){this._timer=l(function(){this.state=Yt},this.options.interval,this);return Yt},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==Jt){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function ae(t,e){e=e||{};e.recognizers=y(e.recognizers,ae.defaults.preset);return new le(t,e)}ae.VERSION="2.0.4";ae.defaults={domEvents:false,touchAction:jt,enable:true,inputTarget:null,inputClass:null,preset:[[re,{enable:false}],[ne,{enable:false},["rotate"]],[oe,{direction:Y}],[ee,{direction:Y},["swipe"]],[se],[se,{event:"doubletap",taps:2},["tap"]],[ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ue=1;var ce=2;function le(t,e){e=e||{};this.options=d(e,ae.defaults);this.options.inputTarget=this.options.inputTarget||t;this.handlers={};this.session={};this.recognizers=[];this.element=t;this.input=et(this);this.touchAction=new $t(this,this.options.touchAction);fe(this,true);h(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]);t[3]&&e.requireFailure(t[3])},this)}le.prototype={set:function(t){p(this.options,t);if(t.touchAction){this.touchAction.update()}if(t.inputTarget){this.input.destroy();this.input.target=t.inputTarget;this.input.init()}return this},stop:function(t){this.session.stopped=t?ce:ue},recognize:function(t){var e=this.session;if(e.stopped){return}this.touchAction.preventDefaults(t);var n;var i=this.recognizers;var r=e.curRecognizer;if(!r||r&&r.state&Jt){r=e.curRecognizer=null}var o=0;while(o<i.length){n=i[o];if(e.stopped!==ce&&(!r||n==r||n.canRecognizeWith(r))){n.recognize(t)}else{n.reset()}if(!r&&n.state&(Bt|Wt|Gt)){r=e.curRecognizer=n}o++}},get:function(t){if(t instanceof Zt){return t}var e=this.recognizers;for(var n=0;n<e.length;n++){if(e[n].options.event==t){return e[n]}}return null},add:function(t){if(f(t,"add",this)){return this}var e=this.get(t.options.event);if(e){this.remove(e)}this.recognizers.push(t);t.manager=this;this.touchAction.update();return t},remove:function(t){if(f(t,"remove",this)){return this}var e=this.recognizers;t=this.get(t);e.splice(_(e,t),1);this.touchAction.update();return this},on:function(t,e){var n=this.handlers;h(E(t),function(t){n[t]=n[t]||[];n[t].push(e)});return this},off:function(t,e){var n=this.handlers;h(E(t),function(t){if(!e){delete n[t]}else{n[t].splice(_(n[t],e),1)}});return this},emit:function(t,e){if(this.options.domEvents){he(t,e)}var n=this.handlers[t]&&this.handlers[t].slice();if(!n||!n.length){return}e.type=t;e.preventDefault=function(){e.srcEvent.preventDefault()};var i=0;while(i<n.length){n[i](e);i++}},destroy:function(){this.element&&fe(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function fe(t,e){var n=t.element;h(t.options.cssProps,function(t,i){n.style[S(n.style,i)]=e?t:""})}function he(t,n){var i=e.createEvent("Event");i.initEvent(t,true,true);i.gesture=n;n.target.dispatchEvent(i)}p(ae,{INPUT_START:R,INPUT_MOVE:$,INPUT_END:V,INPUT_CANCEL:H,STATE_POSSIBLE:Ht,STATE_BEGAN:Bt,STATE_CHANGED:Wt,STATE_ENDED:Gt,STATE_RECOGNIZED:Jt,STATE_CANCELLED:Xt,STATE_FAILED:Yt,DIRECTION_NONE:B,DIRECTION_LEFT:W,DIRECTION_RIGHT:G,DIRECTION_UP:J,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:Z,DIRECTION_ALL:U,Manager:le,Input:tt,TouchAction:$t,TouchInput:kt,MouseInput:gt,PointerEventInput:Mt,TouchMouseInput:Ft,SingleTouchInput:Ct,Recognizer:Zt,AttrRecognizer:te,Tap:se,Pan:ee,Swipe:oe,Pinch:ne,Rotate:re,Press:ie,on:w,off:b,each:h,merge:d,extend:p,inherit:v,bindFn:m,prefixed:S});if(typeof define==s&&define.amd){define(function(){return ae})}else if(typeof module!="undefined"&&module.exports){module.exports=ae}else{t[n]=ae}})(window,document,"Hammer");var Zepto=function(){var t,e,n,i,r=[],o=r.slice,s=r.filter,a=window.document,u={},c={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=a.createElement("table"),w=a.createElement("tr"),b={tr:a.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:w,th:w,"*":a.createElement("div")},x=/complete|loaded|interactive/,M=/^[\w-]*$/,E={},_=E.toString,T={},C,S,A=a.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},k=Array.isArray||function(t){return t instanceof Array};T.matches=function(t,e){if(!e||!t||t.nodeType!==1)return false;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;if(o)(r=A).appendChild(t);i=~T.qsa(r,e).indexOf(t);o&&A.removeChild(t);return i};function I(t){return t==null?String(t):E[_.call(t)]||"object"}function F(t){return I(t)=="function"}function z(t){return t!=null&&t==t.window}function O(t){return t!=null&&t.nodeType==t.DOCUMENT_NODE}function j(t){return I(t)=="object"}function N(t){return j(t)&&!z(t)&&Object.getPrototypeOf(t)==Object.prototype}function D(t){return typeof t.length=="number"}function q(t){return s.call(t,function(t){return t!=null})}function L(t){return t.length>0?n.fn.concat.apply([],t):t}C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})};function R(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}S=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})};function $(t){return t in c?c[t]:c[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function V(t,e){return typeof e=="number"&&!l[R(t)]?e+"px":e}function H(t){var e,n;if(!u[t]){e=a.createElement(t);a.body.appendChild(e);n=getComputedStyle(e,"").getPropertyValue("display");e.parentNode.removeChild(e);n=="none"&&(n="block");u[t]=n}return u[t]}function B(t){return"children"in t?o.call(t.children):n.map(t.childNodes,function(t){if(t.nodeType==1)return t})}T.fragment=function(e,i,r){var s,u,c;if(h.test(e))s=n(a.createElement(RegExp.$1));if(!s){if(e.replace)e=e.replace(p,"<$1></$2>");if(i===t)i=f.test(e)&&RegExp.$1;if(!(i in b))i="*";c=b[i];c.innerHTML=""+e;s=n.each(o.call(c.childNodes),function(){c.removeChild(this)})}if(N(r)){u=n(s);n.each(r,function(t,e){if(m.indexOf(t)>-1)u[t](e);else u.attr(t,e)})}return s};T.Z=function(t,e){t=t||[];t.__proto__=n.fn;t.selector=e||"";return t};T.isZ=function(t){return t instanceof T.Z};T.init=function(e,i){var r;if(!e)return T.Z();else if(typeof e=="string"){e=e.trim();if(e[0]=="<"&&f.test(e))r=T.fragment(e,RegExp.$1,i),e=null;else if(i!==t)return n(i).find(e);else r=T.qsa(a,e)}else if(F(e))return n(a).ready(e);else if(T.isZ(e))return e;else{if(k(e))r=q(e);else if(j(e))r=[e],e=null;else if(f.test(e))r=T.fragment(e.trim(),RegExp.$1,i),e=null;else if(i!==t)return n(i).find(e);else r=T.qsa(a,e)}return T.Z(r,e)};n=function(t,e){return T.init(t,e)};function W(n,i,r){for(e in i)if(r&&(N(i[e])||k(i[e]))){if(N(i[e])&&!N(n[e]))n[e]={};if(k(i[e])&&!k(n[e]))n[e]=[];W(n[e],i[e],r)}else if(i[e]!==t)n[e]=i[e]}n.extend=function(t){var e,n=o.call(arguments,1);if(typeof t=="boolean"){e=t;t=n.shift()}n.forEach(function(n){W(t,n,e)});return t};T.qsa=function(t,e){var n,i=e[0]=="#",r=!i&&e[0]==".",s=i||r?e.slice(1):e,a=M.test(s);return O(t)&&a&&i?(n=t.getElementById(s))?[n]:[]:t.nodeType!==1&&t.nodeType!==9?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))};function G(t,e){return e==null?n(t):n(t).filter(e)}n.contains=a.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){while(e&&(e=e.parentNode))if(e===t)return true;return false};function J(t,e,n,i){return F(e)?e.call(t,n,i):e}function X(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function Y(e,n){var i=e.className||"",r=i&&i.baseVal!==t;if(n===t)return r?i.baseVal:i;r?i.baseVal=n:e.className=n}function Z(t){try{return t?t=="true"||(t=="false"?false:t=="null"?null:+t+""==t?+t:/^[\[\{]/.test(t)?n.parseJSON(t):t):t}catch(e){return t}}n.type=I;n.isFunction=F;n.isWindow=z;n.isArray=k;n.isPlainObject=N;n.isEmptyObject=function(t){var e;for(e in t)return false;return true};n.inArray=function(t,e,n){return r.indexOf.call(e,t,n)};n.camelCase=C;n.trim=function(t){return t==null?"":String.prototype.trim.call(t)};n.uuid=0;n.support={};n.expr={};n.map=function(t,e){var n,i=[],r,o;if(D(t))for(r=0;r<t.length;r++){n=e(t[r],r);if(n!=null)i.push(n)}else for(o in t){n=e(t[o],o);if(n!=null)i.push(n)}return L(i)};n.each=function(t,e){var n,i;if(D(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===false)return t}else{for(i in t)if(e.call(t[i],i,t[i])===false)return t}return t};n.grep=function(t,e){return s.call(t,e)};if(window.JSON)n.parseJSON=JSON.parse;n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){E["[object "+e+"]"]=e.toLowerCase()});n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){if(x.test(a.readyState)&&a.body)t(n);else a.addEventListener("DOMContentLoaded",function(){t(n)},false);return this},get:function(e){return e===t?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null)this.parentNode.removeChild(this)})},each:function(t){r.every.call(this,function(e,n){return t.call(e,n,e)!==false});return this},filter:function(t){if(F(t))return this.not(this.not(t));return n(s.call(this,function(e){return T.matches(e,t)}))},add:function(t,e){return n(S(this.concat(n(t,e))))},is:function(t){return this.length>0&&T.matches(this[0],t)},not:function(e){var i=[];if(F(e)&&e.call!==t)this.each(function(t){if(!e.call(this,t))i.push(this)});else{var r=typeof e=="string"?this.filter(e):D(e)&&F(e.item)?o.call(e):n(e);this.forEach(function(t){if(r.indexOf(t)<0)i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return j(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!j(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!j(t)?t:n(t)},find:function(t){var e,i=this;if(!t)e=n();else if(typeof t=="object")e=n(t).filter(function(){var t=this;return r.some.call(i,function(e){return n.contains(e,t)})});else if(this.length==1)e=n(T.qsa(this[0],t));else e=this.map(function(){return T.qsa(this,t)});return e},closest:function(t,e){var i=this[0],r=false;if(typeof t=="object")r=n(t);while(i&&!(r?r.indexOf(i)>=0:T.matches(i,t)))i=i!==e&&!O(i)&&i.parentNode;return n(i)},parents:function(t){var e=[],i=this;while(i.length>0)i=n.map(i,function(t){if((t=t.parentNode)&&!O(t)&&e.indexOf(t)<0){e.push(t);return t}});return G(e,t)},parent:function(t){return G(S(this.pluck("parentNode")),t)},children:function(t){return G(this.map(function(){return B(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return G(this.map(function(t,e){return s.call(B(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")=="none")this.style.display=H(this.nodeName)})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=F(t);if(this[0]&&!e)var i=n(t).get(0),r=i.parentNode||this.length>1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(true):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));var e;while((e=t.children()).length)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=F(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){this.parent().each(function(){n(this).replaceWith(n(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?i.css("display")=="none":e)?i.show():i.hide()})},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=J(this,t,e,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,i){var r;return typeof n=="string"&&!(1 in arguments)?!this.length||this[0].nodeType!==1?t:!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(t){if(this.nodeType!==1)return;if(j(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))})},removeAttr:function(t){return this.each(function(){this.nodeType===1&&t.split(" ").forEach(function(t){X(this,t)},this)})},prop:function(t,e){t=P[t]||t;return 1 in arguments?this.each(function(n){this[t]=J(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(e,n){var i="data-"+e.replace(v,"-$1").toLowerCase();var r=1 in arguments?this.attr(i,n):this.attr(i);return r!==null?Z(r):t},val:function(t){return 0 in arguments?this.each(function(e){this.value=J(this,t,e,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};if(i.css("position")=="static")s["position"]="relative";i.css(s)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r,o=this[0];if(!o)return;r=getComputedStyle(o,"");if(typeof t=="string")return o.style[C(t)]||r.getPropertyValue(t);else if(k(t)){var s={};n.each(t,function(t,e){s[e]=o.style[C(e)]||r.getPropertyValue(e)});return s}}var a="";if(I(t)=="string"){if(!i&&i!==0)this.each(function(){this.style.removeProperty(R(t))});else a=R(t)+":"+V(t,i)}else{for(e in t)if(!t[e]&&t[e]!==0)this.each(function(){this.style.removeProperty(R(e))});else a+=R(e)+":"+V(e,t[e])+";"}return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){if(!t)return false;return r.some.call(this,function(t){return this.test(Y(t))},$(t))},addClass:function(t){if(!t)return this;return this.each(function(e){if(!("className"in this))return;i=[];var r=Y(this),o=J(this,t,e,r);o.split(/\s+/g).forEach(function(t){if(!n(this).hasClass(t))i.push(t)},this);i.length&&Y(this,r+(r?" ":"")+i.join(" "))})},removeClass:function(e){return this.each(function(n){if(!("className"in this))return;if(e===t)return Y(this,"");i=Y(this);J(this,e,n,i).split(/\s+/g).forEach(function(t){i=i.replace($(t)," ")});Y(this,i.trim())})},toggleClass:function(e,i){if(!e)return this;return this.each(function(r){var o=n(this),s=J(this,e,r,Y(this));s.split(/\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})})},scrollTop:function(e){if(!this.length)return;var n="scrollTop"in this[0];if(e===t)return n?this[0].scrollTop:this[0].pageYOffset;return this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})},scrollLeft:function(e){if(!this.length)return;var n="scrollLeft"in this[0];if(e===t)return n?this[0].scrollLeft:this[0].pageXOffset;return this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY);
})},position:function(){if(!this.length)return;var t=this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();i.top-=parseFloat(n(t).css("margin-top"))||0;i.left-=parseFloat(n(t).css("margin-left"))||0;r.top+=parseFloat(n(e[0]).css("border-top-width"))||0;r.left+=parseFloat(n(e[0]).css("border-left-width"))||0;return{top:i.top-r.top,left:i.left-r.left}},offsetParent:function(){return this.map(function(){var t=this.offsetParent||a.body;while(t&&!d.test(t.nodeName)&&n(t).css("position")=="static")t=t.offsetParent;return t})}};n.fn.detach=n.fn.remove;["width","height"].forEach(function(e){var i=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(r){var o,s=this[0];if(r===t)return z(s)?s["inner"+i]:O(s)?s.documentElement["scroll"+i]:(o=this.offset())&&o[e];else return this.each(function(t){s=n(this);s.css(e,J(this,r,t,s[e]()))})}});function U(t,e){e(t);for(var n=0,i=t.childNodes.length;n<i;n++)U(t.childNodes[n],e)}g.forEach(function(t,e){var i=e%2;n.fn[t]=function(){var t,r=n.map(arguments,function(e){t=I(e);return t=="object"||t=="array"||e==null?e:T.fragment(e)}),o,s=this.length>1;if(r.length<1)return this;return this.each(function(t,u){o=i?u:u.parentNode;u=e==0?u.nextSibling:e==1?u.firstChild:e==2?u:null;var c=n.contains(a.documentElement,o);r.forEach(function(t){if(s)t=t.cloneNode(true);else if(!o)return n(t).remove();o.insertBefore(t,u);if(c)U(t,function(t){if(t.nodeName!=null&&t.nodeName.toUpperCase()==="SCRIPT"&&(!t.type||t.type==="text/javascript")&&!t.src)window["eval"].call(window,t.innerHTML)})})})};n.fn[i?t+"To":"insert"+(e?"Before":"After")]=function(e){n(e)[t](this);return this}});T.Z.prototype=n.fn;T.uniq=S;T.deserializeValue=Z;n.zepto=T;return n}();window.Zepto=Zepto;window.$===undefined&&(window.$=Zepto);(function(t){var e=1,n,i=Array.prototype.slice,r=t.isFunction,o=function(t){return typeof t=="string"},s={},a={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents";function f(t){return t._zid||(t._zid=e++)}function h(t,e,n,i){e=p(e);if(e.ns)var r=d(e.ns);return(s[f(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!n||f(t.fn)===f(n))&&(!i||t.sel==i)})}function p(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function d(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function v(t,e){return t.del&&(!u&&t.e in c)||!!e}function m(t){return l[t]||u&&c[t]||t}function g(e,i,r,o,a,u,c){var h=f(e),d=s[h]||(s[h]=[]);i.split(/\s/).forEach(function(i){if(i=="ready")return t(document).ready(r);var s=p(i);s.fn=r;s.sel=a;if(s.e in l)r=function(e){var n=e.relatedTarget;if(!n||n!==this&&!t.contains(this,n))return s.fn.apply(this,arguments)};s.del=u;var f=u||r;s.proxy=function(t){t=E(t);if(t.isImmediatePropagationStopped())return;t.data=o;var i=f.apply(e,t._args==n?[t]:[t].concat(t._args));if(i===false)t.preventDefault(),t.stopPropagation();return i};s.i=d.length;d.push(s);if("addEventListener"in e)e.addEventListener(m(s.e),s.proxy,v(s,c))})}function y(t,e,n,i,r){var o=f(t);(e||"").split(/\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete s[o][e.i];if("removeEventListener"in t)t.removeEventListener(m(e.e),e.proxy,v(e,r))})})}t.event={add:g,remove:y};t.proxy=function(e,n){var s=2 in arguments&&i.call(arguments,2);if(r(e)){var a=function(){return e.apply(n,s?s.concat(i.call(arguments)):arguments)};a._zid=f(e);return a}else if(o(n)){if(s){s.unshift(e[n],e);return t.proxy.apply(null,s)}else{return t.proxy(e[n],e)}}else{throw new TypeError("expected function")}};t.fn.bind=function(t,e,n){return this.on(t,e,n)};t.fn.unbind=function(t,e){return this.off(t,e)};t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var w=function(){return true},b=function(){return false},x=/^([A-Z]|returnValue$|layer[XY]$)/,M={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function E(e,i){if(i||!e.isDefaultPrevented){i||(i=e);t.each(M,function(t,n){var r=i[t];e[t]=function(){this[n]=w;return r&&r.apply(i,arguments)};e[n]=b});if(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?i.returnValue===false:i.getPreventDefault&&i.getPreventDefault())e.isDefaultPrevented=w}return e}function _(t){var e,i={originalEvent:t};for(e in t)if(!x.test(e)&&t[e]!==n)i[e]=t[e];return E(i,t)}t.fn.delegate=function(t,e,n){return this.on(e,t,n)};t.fn.undelegate=function(t,e,n){return this.off(e,t,n)};t.fn.live=function(e,n){t(document.body).delegate(this.selector,e,n);return this};t.fn.die=function(e,n){t(document.body).undelegate(this.selector,e,n);return this};t.fn.on=function(e,s,a,u,c){var l,f,h=this;if(e&&!o(e)){t.each(e,function(t,e){h.on(t,s,a,e,c)});return h}if(!o(s)&&!r(u)&&u!==false)u=a,a=s,s=n;if(r(a)||a===false)u=a,a=n;if(u===false)u=b;return h.each(function(n,r){if(c)l=function(t){y(r,t.type,u);return u.apply(this,arguments)};if(s)f=function(e){var n,o=t(e.target).closest(s,r).get(0);if(o&&o!==r){n=t.extend(_(e),{currentTarget:o,liveFired:r});return(l||u).apply(o,[n].concat(i.call(arguments,1)))}};g(r,e,u,a,s,f||l)})};t.fn.off=function(e,i,s){var a=this;if(e&&!o(e)){t.each(e,function(t,e){a.off(t,i,e)});return a}if(!o(i)&&!r(s)&&s!==false)s=i,i=n;if(s===false)s=b;return a.each(function(){y(this,e,s,i)})};t.fn.trigger=function(e,n){e=o(e)||t.isPlainObject(e)?t.Event(e):E(e);e._args=n;return this.each(function(){if(e.type in c&&typeof this[e.type]=="function")this[e.type]();else if("dispatchEvent"in this)this.dispatchEvent(e);else t(this).triggerHandler(e,n)})};t.fn.triggerHandler=function(e,n){var i,r;this.each(function(s,a){i=_(o(e)?t.Event(e):e);i._args=n;i.target=a;t.each(h(a,e.type||e),function(t,e){r=e.proxy(i);if(i.isImmediatePropagationStopped())return false})});return r};("focusin focusout focus blur load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select keydown keypress keyup error").split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}});t.Event=function(t,e){if(!o(t))e=t,t=e.type;var n=document.createEvent(a[t]||"Events"),i=true;if(e)for(var r in e)r=="bubbles"?i=!!e[r]:n[r]=e[r];n.initEvent(t,i,true);return E(n)}})(Zepto);(function(t){var e=0,n=window.document,i,r,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,u="application/json",c="text/html",l=/^\s*$/,f=n.createElement("a");f.href=window.location.href;function h(e,n,i){var r=t.Event(n);t(e).trigger(r,i);return!r.isDefaultPrevented()}function p(t,e,i,r){if(t.global)return h(e||n,i,r)}t.active=0;function d(e){if(e.global&&t.active++===0)p(e,null,"ajaxStart")}function v(e){if(e.global&&!--t.active)p(e,null,"ajaxStop")}function m(t,e){var n=e.context;if(e.beforeSend.call(n,t,e)===false||p(e,n,"ajaxBeforeSend",[t,e])===false)return false;p(e,n,"ajaxSend",[t,e])}function g(t,e,n,i){var r=n.context,o="success";n.success.call(r,t,o,e);if(i)i.resolveWith(r,[t,o,e]);p(n,r,"ajaxSuccess",[e,n,t]);w(o,e,n)}function y(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t);if(r)r.rejectWith(o,[n,e,t]);p(i,o,"ajaxError",[n,i,t||e]);w(e,n,i)}function w(t,e,n){var i=n.context;n.complete.call(i,e,t);p(n,i,"ajaxComplete",[e,n]);v(n)}function b(){}t.ajaxJSONP=function(i,r){if(!("type"in i))return t.ajax(i);var o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||"jsonp"+ ++e,a=n.createElement("script"),u=window[s],c,l=function(e){t(a).triggerHandler("error",e||"abort")},f={abort:l},h;if(r)r.promise(f);t(a).on("load error",function(e,n){clearTimeout(h);t(a).off().remove();if(e.type=="error"||!c){y(null,n||"error",f,i,r)}else{g(c[0],f,i,r)}window[s]=u;if(c&&t.isFunction(u))u(c[0]);u=c=undefined});if(m(f,i)===false){l("abort");return f}window[s]=function(){c=arguments};a.src=i.url.replace(/\?(.+)=\?/,"?$1="+s);n.head.appendChild(a);if(i.timeout>0)h=setTimeout(function(){l("timeout")},i.timeout);return f};t.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:true,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true};function x(t){if(t)t=t.split(";",2)[0];return t&&(t==c?"html":t==u?"json":s.test(t)?"script":a.test(t)&&"xml")||"text"}function M(t,e){if(e=="")return t;return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function E(e){if(e.processData&&e.data&&t.type(e.data)!="string")e.data=t.param(e.data,e.traditional);if(e.data&&(!e.type||e.type.toUpperCase()=="GET"))e.url=M(e.url,e.data),e.data=undefined}t.ajax=function(e){var o=t.extend({},e||{}),s=t.Deferred&&t.Deferred(),a;for(i in t.ajaxSettings)if(o[i]===undefined)o[i]=t.ajaxSettings[i];d(o);if(!o.crossDomain){a=n.createElement("a");a.href=o.url;a.href=a.href;o.crossDomain=f.protocol+"//"+f.host!==a.protocol+"//"+a.host}if(!o.url)o.url=window.location.toString();E(o);var u=o.dataType,c=/\?.+=\?/.test(o.url);if(c)u="jsonp";if(o.cache===false||(!e||e.cache!==true)&&("script"==u||"jsonp"==u))o.url=M(o.url,"_="+Date.now());if("jsonp"==u){if(!c)o.url=M(o.url,o.jsonp?o.jsonp+"=?":o.jsonp===false?"":"callback=?");return t.ajaxJSONP(o,s)}var h=o.accepts[u],p={},v=function(t,e){p[t.toLowerCase()]=[t,e]},w=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,_=o.xhr(),T=_.setRequestHeader,C;if(s)s.promise(_);if(!o.crossDomain)v("X-Requested-With","XMLHttpRequest");v("Accept",h||"*/*");if(h=o.mimeType||h){if(h.indexOf(",")>-1)h=h.split(",",2)[0];_.overrideMimeType&&_.overrideMimeType(h)}if(o.contentType||o.contentType!==false&&o.data&&o.type.toUpperCase()!="GET")v("Content-Type",o.contentType||"application/x-www-form-urlencoded");if(o.headers)for(r in o.headers)v(r,o.headers[r]);_.setRequestHeader=v;_.onreadystatechange=function(){if(_.readyState==4){_.onreadystatechange=b;clearTimeout(C);var e,n=false;if(_.status>=200&&_.status<300||_.status==304||_.status==0&&w=="file:"){u=u||x(o.mimeType||_.getResponseHeader("content-type"));e=_.responseText;try{if(u=="script")(1,eval)(e);else if(u=="xml")e=_.responseXML;else if(u=="json")e=l.test(e)?null:t.parseJSON(e)}catch(i){n=i}if(n)y(n,"parsererror",_,o,s);else g(e,_,o,s)}else{y(_.statusText||null,_.status?"error":"abort",_,o,s)}}};if(m(_,o)===false){_.abort();y(null,"abort",_,o,s);return _}if(o.xhrFields)for(r in o.xhrFields)_[r]=o.xhrFields[r];var S="async"in o?o.async:true;_.open(o.type,o.url,S,o.username,o.password);for(r in p)T.apply(_,p[r]);if(o.timeout>0)C=setTimeout(function(){_.onreadystatechange=b;_.abort();y(null,"timeout",_,o,s)},o.timeout);_.send(o.data?o.data:null);return _};function _(e,n,i,r){if(t.isFunction(n))r=i,i=n,n=undefined;if(!t.isFunction(i))r=i,i=undefined;return{url:e,data:n,success:i,dataType:r}}t.get=function(){return t.ajax(_.apply(null,arguments))};t.post=function(){var e=_.apply(null,arguments);e.type="POST";return t.ajax(e)};t.getJSON=function(){var e=_.apply(null,arguments);e.dataType="json";return t.ajax(e)};t.fn.load=function(e,n,i){if(!this.length)return this;var r=this,s=e.split(/\s/),a,u=_(e,n,i),c=u.success;if(s.length>1)u.url=s[0],a=s[1];u.success=function(e){r.html(a?t("<div>").html(e.replace(o,"")).find(a):e);c&&c.apply(r,arguments)};t.ajax(u);return this};var T=encodeURIComponent;function C(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u);if(r)n=i?r:r+"["+(a||o=="object"||o=="array"?n:"")+"]";if(!r&&s)e.add(u.name,u.value);else if(o=="array"||!i&&o=="object")C(e,u,i,n);else e.add(n,u)})}t.param=function(e,n){var i=[];i.add=function(e,n){if(t.isFunction(n))n=n();if(n==null)n="";this.push(T(e)+"="+T(n))};C(i,e,n);return i.join("&").replace(/%20/g,"+")}})(Zepto);(function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){if(t.forEach)return t.forEach(r);i.push({name:e,value:t})};if(this[0])t.each(this[0].elements,function(i,o){n=o.type,e=o.name;if(e&&o.nodeName.toLowerCase()!="fieldset"&&!o.disabled&&n!="submit"&&n!="reset"&&n!="button"&&n!="file"&&(n!="radio"&&n!="checkbox"||o.checked))r(t(o).val())});return i};t.fn.serialize=function(){var t=[];this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))});return t.join("&")};t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n);if(!n.isDefaultPrevented())this.get(0).submit()}return this}})(Zepto);(function(t){if(!("__proto__"in{})){t.extend(t.zepto,{Z:function(e,n){e=e||[];t.extend(e,t.fn);e.selector=n||"";e.__Z=true;return e},isZ:function(e){return t.type(e)==="array"&&"__Z"in e}})}try{getComputedStyle(undefined)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}})(Zepto);(function(t,e,n){function i(n,o){if(!e[n]){if(!t[n]){var s=typeof require=="function"&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var r=t[n][1][e];return i(r?r:e)},a,a.exports)}return e[n].exports}var r=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i})({1:[function(t,e,n){var i=t("./pointable"),r=t("gl-matrix"),o=r.vec3,s=r.mat3,a=r.mat4,u=t("underscore");var c=e.exports=function(t,e){this.finger=t;this._center=null,this._matrix=null;this.type=e.type;this.prevJoint=e.prevJoint;this.nextJoint=e.nextJoint;this.width=e.width;var n=new Array(3);o.sub(n,e.nextJoint,e.prevJoint);this.length=o.length(n);this.basis=e.basis};c.prototype.left=function(){if(this._left)return this._left;this._left=s.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0;return this._left};c.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,e=this._matrix=a.create();e[0]=t[0][0],e[1]=t[0][1],e[2]=t[0][2];e[4]=t[1][0],e[5]=t[1][1],e[6]=t[1][2];e[8]=t[2][0],e[9]=t[2][1],e[10]=t[2][2];e[3]=this.center()[0];e[7]=this.center()[1];e[11]=this.center()[2];if(this.left()){e[0]*=-1;e[1]*=-1;e[2]*=-1}return this._matrix};c.prototype.lerp=function(t,e){o.lerp(t,this.prevJoint,this.nextJoint,e)};c.prototype.center=function(){if(this._center)return this._center;var t=o.create();this.lerp(t,.5);this._center=t;return t};c.prototype.direction=function(){return[this.basis[2][0]*-1,this.basis[2][1]*-1,this.basis[2][2]*-1]}},{"./pointable":14,"gl-matrix":23,underscore:24}],2:[function(t,e,n){var i=e.exports=function(t){this.pos=0;this._buf=[];this.size=t};i.prototype.get=function(t){if(t==undefined)t=0;if(t>=this.size)return undefined;if(t>=this._buf.length)return undefined;return this._buf[(this.pos-t-1)%this.size]};i.prototype.push=function(t){this._buf[this.pos%this.size]=t;return this.pos++}},{}],3:[function(t,e,n){var i=t("../protocol").chooseProtocol,r=t("events").EventEmitter,o=t("underscore");var s=e.exports=function(t){this.opts=o.defaults(t||{},{host:"127.0.0.1",enableGestures:false,scheme:this.getScheme(),port:this.getPort(),background:false,optimizeHMD:false,requestProtocolVersion:s.defaultProtocolVersion});this.host=this.opts.host;this.port=this.opts.port;this.scheme=this.opts.scheme;this.protocolVersionVerified=false;this.background=null;this.optimizeHMD=null;this.on("ready",function(){this.enableGestures(this.opts.enableGestures);this.setBackground(this.opts.background);this.setOptimizeHMD(this.opts.optimizeHMD);if(this.opts.optimizeHMD){console.log("Optimized for head mounted display usage.")}else{console.log("Optimized for desktop usage.")}})};s.defaultProtocolVersion=6;s.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"};s.prototype.getScheme=function(){return"ws:"};s.prototype.getPort=function(){return 6437};s.prototype.setBackground=function(t){this.opts.background=t;if(this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background){this.background=this.opts.background;this.protocol.sendBackground(this,this.opts.background)}};s.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t;if(this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD){this.optimizeHMD=this.opts.optimizeHMD;this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD)}};s.prototype.handleOpen=function(){if(!this.connected){this.connected=true;this.emit("connect")}};s.prototype.enableGestures=function(t){this.gesturesEnabled=t?true:false;this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))};s.prototype.handleClose=function(t,e){if(!this.connected)return;this.disconnect();if(t===1001&&this.opts.requestProtocolVersion>1){if(this.protocolVersionVerified){this.protocolVersionVerified=false}else{this.opts.requestProtocolVersion--}}this.startReconnection()};s.prototype.startReconnection=function(){var t=this;if(!this.reconnectionTimer){this.reconnectionTimer=setInterval(function(){t.reconnect()},500)}};s.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)};s.prototype.disconnect=function(t){if(!t)this.stopReconnection();if(!this.socket)return;this.socket.close();delete this.socket;delete this.protocol;delete this.background;delete this.optimizeHMD;delete this.focusedState;if(this.connected){this.connected=false;this.emit("disconnect")}return true};s.prototype.reconnect=function(){if(this.connected){this.stopReconnection()}else{this.disconnect(true);this.connect()}};s.prototype.handleData=function(t){var e=JSON.parse(t);var n;if(this.protocol===undefined){n=this.protocol=i(e);this.protocolVersionVerified=true;this.emit("ready")}else{n=this.protocol(e)}this.emit(n.type,n)};s.prototype.connect=function(){if(this.socket)return;this.socket=this.setupSocket();return true};s.prototype.send=function(t){this.socket.send(t)};s.prototype.reportFocus=function(t){if(!this.connected||this.focusedState===t)return;this.focusedState=t;this.emit(this.focusedState?"focus":"blur");if(this.protocol&&this.protocol.sendFocused){this.protocol.sendFocused(this,this.focusedState)}};o.extend(s.prototype,r.prototype)},{"../protocol":15,events:21,underscore:24}],4:[function(t,e,n){var i=e.exports=t("./base"),r=t("underscore");var o=e.exports=function(t){i.call(this,t);var e=this;this.on("ready",function(){e.startFocusLoop()});this.on("disconnect",function(){e.stopFocusLoop()})};r.extend(o.prototype,i.prototype);o.__proto__=i;o.prototype.useSecure=function(){return location.protocol==="https:"};o.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"};o.prototype.getPort=function(){return this.useSecure()?6436:6437};o.prototype.setupSocket=function(){var t=this;var e=new WebSocket(this.getUrl());e.onopen=function(){t.handleOpen()};e.onclose=function(e){t.handleClose(e["code"],e["reason"])};e.onmessage=function(e){t.handleData(e.data)};e.onerror=function(e){if(t.useSecure()&&t.scheme==="wss:"){t.scheme="ws:";t.port=6437;t.disconnect();t.connect()}};return e};o.prototype.startFocusLoop=function(){if(this.focusDetectorTimer)return;var t=this;var e=null;if(typeof document.hidden!=="undefined"){e="hidden"}else if(typeof document.mozHidden!=="undefined"){e="mozHidden"}else if(typeof document.msHidden!=="undefined"){e="msHidden"}else if(typeof document.webkitHidden!=="undefined"){e="webkitHidden"}else{e=undefined}if(t.windowVisible===undefined){t.windowVisible=e===undefined?true:document[e]===false}var n=window.addEventListener("focus",function(e){t.windowVisible=true;r()});var i=window.addEventListener("blur",function(e){t.windowVisible=false;r()});this.on("disconnect",function(){window.removeEventListener("focus",n);window.removeEventListener("blur",i)});var r=function(){var n=e===undefined?true:document[e]===false;t.reportFocus(n&&t.windowVisible)};r();this.focusDetectorTimer=setInterval(r,100)};o.prototype.stopFocusLoop=function(){if(!this.focusDetectorTimer)return;clearTimeout(this.focusDetectorTimer);delete this.focusDetectorTimer}},{"./base":3,underscore:24}],5:[function(t,e,n){var i=t("__browserify_process");var r=t("./frame"),o=t("./hand"),s=t("./pointable"),a=t("./finger"),u=t("./circular_buffer"),c=t("./pipeline"),l=t("events").EventEmitter,f=t("./gesture").gestureListener,h=t("./dialog"),p=t("underscore");var d=e.exports=function(e){var n=typeof i!=="undefined"&&i.versions&&i.versions.node,o=this;e=p.defaults(e||{},{inNode:n});this.inNode=e.inNode;e=p.defaults(e||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:true,useAllPlugins:false,checkVersion:true});this.animationFrameRequested=false;this.onAnimationFrame=function(t){if(o.lastConnectionFrame.valid){o.emit("animationFrame",o.lastConnectionFrame)}o.emit("frameEnd",t);if(o.loopWhileDisconnected&&(o.connection.focusedState!==false||o.connection.opts.background)){window.requestAnimationFrame(o.onAnimationFrame)}else{o.animationFrameRequested=false}};this.suppressAnimationLoop=e.suppressAnimationLoop;this.loopWhileDisconnected=e.loopWhileDisconnected;this.frameEventName=e.frameEventName;this.useAllPlugins=e.useAllPlugins;this.history=new u(200);this.lastFrame=r.Invalid;this.lastValidFrame=r.Invalid;this.lastConnectionFrame=r.Invalid;this.accumulatedGestures=[];this.checkVersion=e.checkVersion;if(e.connectionType===undefined){this.connectionType=this.inBrowser()?t("./connection/browser"):t("./connection/node")}else{this.connectionType=e.connectionType}this.connection=new this.connectionType(e);this.streamingCount=0;this.devices={};this.plugins={};this._pluginPipelineSteps={};this._pluginExtendedMethods={};if(e.useAllPlugins)this.useRegisteredPlugins();this.setupFrameEvents(e);this.setupConnectionEvents();this.startAnimationLoop()};d.prototype.gesture=function(t,e){var n=f(this,t);if(e!==undefined){n.stop(e)}return n};d.prototype.setBackground=function(t){this.connection.setBackground(t);return this};d.prototype.setOptimizeHMD=function(t){this.connection.setOptimizeHMD(t);return this};d.prototype.inBrowser=function(){return!this.inNode};d.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()};d.prototype.inBackgroundPage=function(){return typeof chrome!=="undefined"&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window};d.prototype.connect=function(){this.connection.connect();return this};d.prototype.streaming=function(){return this.streamingCount>0};d.prototype.connected=function(){return!!this.connection.connected};d.prototype.startAnimationLoop=function(){if(!this.suppressAnimationLoop&&!this.animationFrameRequested){this.animationFrameRequested=true;window.requestAnimationFrame(this.onAnimationFrame)}};d.prototype.disconnect=function(){this.connection.disconnect();return this};d.prototype.frame=function(t){return this.history.get(t)||r.Invalid};d.prototype.loop=function(t){if(t){if(typeof t==="function"){this.on(this.frameEventName,t)}else{this.setupFrameEvents(t)}}return this.connect()};d.prototype.addStep=function(t){if(!this.pipeline)this.pipeline=new c(this);this.pipeline.addStep(t)};d.prototype.processFrame=function(t){if(t.gestures){this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)}this.lastConnectionFrame=t;this.startAnimationLoop();this.emit("deviceFrame",t)};d.prototype.processFinishedFrame=function(t){this.lastFrame=t;if(t.valid){this.lastValidFrame=t}t.controller=this;t.historyIdx=this.history.push(t);if(t.gestures){t.gestures=this.accumulatedGestures;this.accumulatedGestures=[];for(var e=0;e!=t.gestures.length;e++){this.emit("gesture",t.gestures[e],t)}}if(this.pipeline){t=this.pipeline.run(t);if(!t)t=r.Invalid}this.emit("frame",t);this.emitHandEvents(t)};d.prototype.emitHandEvents=function(t){for(var e=0;e<t.hands.length;e++){this.emit("hand",t.hands[e])}};d.prototype.setupFrameEvents=function(t){if(t.frame){this.on("frame",t.frame)}if(t.hand){this.on("hand",t.hand)}};d.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(e){t.processFrame(e)});this.on(this.frameEventName,function(e){t.processFinishedFrame(e)});var e=function(){if(t.connection.opts.requestProtocolVersion<5&&t.streamingCount==0){t.streamingCount=1;var n={attached:true,streaming:true,type:"unknown",id:"Lx00000000000"};t.devices[n.id]=n;t.emit("deviceAttached",n);t.emit("deviceStreaming",n);t.emit("streamingStarted",n);t.connection.removeListener("frame",e)}};var n=function(){if(t.streamingCount>0){for(var e in t.devices){t.emit("deviceStopped",t.devices[e]);t.emit("deviceRemoved",t.devices[e])}t.emit("streamingStopped",t.devices[e]);t.streamingCount=0;for(var e in t.devices){delete t.devices[e]}}};this.connection.on("focus",function(){if(t.loopWhileDisconnected){t.startAnimationLoop()}t.emit("focus")});this.connection.on("blur",function(){t.emit("blur")});this.connection.on("protocol",function(e){e.on("beforeFrameCreated",function(e){t.emit("beforeFrameCreated",e)});e.on("afterFrameCreated",function(e,n){t.emit("afterFrameCreated",e,n)});t.emit("protocol",e)});this.connection.on("ready",function(){if(t.checkVersion&&!t.inNode){t.checkOutOfDate()}t.emit("ready")});this.connection.on("connect",function(){t.emit("connect");t.connection.removeListener("frame",e);t.connection.on("frame",e)});this.connection.on("disconnect",function(){t.emit("disconnect");n()});this.connection.on("deviceConnect",function(i){if(i.state){t.emit("deviceConnected");t.connection.removeListener("frame",e);t.connection.on("frame",e)}else{t.emit("deviceDisconnected");n()}});this.connection.on("deviceEvent",function(e){var n=e.state,i=t.devices[n.id];var r={};for(var o in n){if(!i||!i.hasOwnProperty(o)||i[o]!=n[o]){r[o]=true}}t.devices[n.id]=n;if(r.attached){t.emit(n.attached?"deviceAttached":"deviceRemoved",n)}if(!r.streaming)return;if(n.streaming){t.streamingCount++;t.emit("deviceStreaming",n);if(t.streamingCount==1){t.emit("streamingStarted",n)}if(!r.attached){t.emit("deviceConnected")}}else if(!(r.attached&&n.attached)){t.streamingCount--;t.emit("deviceStopped",n);if(t.streamingCount==0){t.emit("streamingStopped",n)}t.emit("deviceDisconnected")}});this.on("newListener",function(t,e){if(t=="deviceConnected"||t=="deviceDisconnected"){console.warn(t+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")}})};d.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion;var e=this.connection.protocol.version;var n=this.connectionType.defaultProtocolVersion;if(n>e){console.warn("Your Protocol Version is v"+e+", this app was designed for v"+n);h.warnOutOfDate({sV:t,pV:e});return true}else{return false}};d._pluginFactories={};d.plugin=function(t,e){if(this._pluginFactories[t]){console.warn('Plugin "'+t+'" already registered')}return this._pluginFactories[t]=e};d.plugins=function(){return p.keys(this._pluginFactories)};var v=function(t,e,n){if(["beforeFrameCreated","afterFrameCreated"].indexOf(e)!=-1){this.on(e,n)}else{if(!this.pipeline)this.pipeline=new c(this);if(!this._pluginPipelineSteps[t])this._pluginPipelineSteps[t]=[];this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(e,n))}};var m=function(t,e,n){var i;if(!this._pluginExtendedMethods[t])this._pluginExtendedMethods[t]=[];switch(e){case"frame":i=r;break;case"hand":i=o;break;case"pointable":i=s;p.extend(a.prototype,n);p.extend(a.Invalid,n);break;case"finger":i=a;break;default:throw t+' specifies invalid object type "'+e+'" for prototypical extension'}p.extend(i.prototype,n);p.extend(i.Invalid,n);this._pluginExtendedMethods[t].push([i,n])};d.prototype.use=function(t,e){var n,i,r,o;i=typeof t=="function"?t:d._pluginFactories[t];if(!i){throw"Leap Plugin "+t+" not found."}e||(e={});if(this.plugins[t]){p.extend(this.plugins[t],e);return this}this.plugins[t]=e;o=i.call(this,e);for(r in o){n=o[r];if(typeof n==="function"){v.call(this,t,r,n)}else{m.call(this,t,r,n)}}return this};d.prototype.stopUsing=function(t){var e=this._pluginPipelineSteps[t],n=this._pluginExtendedMethods[t],i=0,r,o;if(!this.plugins[t])return;if(e){for(i=0;i<e.length;i++){this.pipeline.removeStep(e[i])}}if(n){for(i=0;i<n.length;i++){r=n[i][0];o=n[i][1];for(var s in o){delete r.prototype[s];delete r.Invalid[s]}}}delete this.plugins[t];return this};d.prototype.useRegisteredPlugins=function(){for(var t in d._pluginFactories){this.use(t)}};p.extend(d.prototype,l.prototype)},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":20,"./dialog":6,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./pipeline":13,"./pointable":14,__browserify_process:22,events:21,underscore:24}],6:[function(t,e,n){var i=t("__browserify_process");var r=e.exports=function(t,e){this.options=e||{};this.message=t;this.createElement()};r.prototype.createElement=function(){this.element=document.createElement("div");this.element.className="leapjs-dialog";this.element.style.position="fixed";this.element.style.top="8px";this.element.style.left=0;this.element.style.right=0;this.element.style.textAlign="center";this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t);t.style.className="leapjs-dialog";t.style.display="inline-block";t.style.margin="auto";t.style.padding="8px";t.style.color="#222";t.style.background="#eee";t.style.borderRadius="4px";t.style.border="1px solid #999";t.style.textAlign="left";t.style.cursor="pointer";t.style.whiteSpace="nowrap";t.style.transition="box-shadow 1s linear";t.innerHTML=this.message;if(this.options.onclick){t.addEventListener("click",this.options.onclick)}if(this.options.onmouseover){t.addEventListener("mouseover",this.options.onmouseover)}if(this.options.onmouseout){t.addEventListener("mouseout",this.options.onmouseout)}if(this.options.onmousemove){t.addEventListener("mousemove",this.options.onmousemove)}};r.prototype.show=function(){document.body.appendChild(this.element);return this};r.prototype.hide=function(){document.body.removeChild(this.element);return this};r.warnOutOfDate=function(t){t||(t={});var e="http://developer.leapmotion.com?";t.returnTo=window.location.href;for(var n in t){e+=n+"="+encodeURIComponent(t[n])+"&"}var i,o=function(t){if(t.target.id!="leapjs-decline-upgrade"){var n=window.open(e,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");if(window.focus){n.focus()}}i.hide();return true},s="This site requires Leap Motion Tracking V2."+"<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button>"+"<button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>";i=new r(s,{onclick:o,onmousemove:function(t){if(t.target==document.getElementById("leapjs-decline-upgrade")){document.getElementById("leapjs-decline-upgrade").style.color="#000";document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00";document.getElementById("leapjs-accept-upgrade").style.color="#444";document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}else{document.getElementById("leapjs-accept-upgrade").style.color="#000";document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00";document.getElementById("leapjs-decline-upgrade").style.color="#444";document.getElementById("leapjs-decline-upgrade").style.boxShadow="none"}},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444";document.getElementById("leapjs-decline-upgrade").style.boxShadow="none";document.getElementById("leapjs-accept-upgrade").style.color="#444";document.getElementById("leapjs-accept-upgrade").style.boxShadow="none";
}});return i.show()};r.hasWarnedBones=false;r.warnBones=function(){if(this.hasWarnedBones)return;this.hasWarnedBones=true;console.warn("Your Leap Service is out of date");if(!(typeof i!=="undefined"&&i.versions&&i.versions.node)){this.warnOutOfDate({reason:"bones"})}}},{__browserify_process:22}],7:[function(t,e,n){var i=t("./pointable"),r=t("./bone"),o=t("./dialog"),s=t("underscore");var a=e.exports=function(t){i.call(this,t);this.dipPosition=t.dipPosition;this.pipPosition=t.pipPosition;this.mcpPosition=t.mcpPosition;this.carpPosition=t.carpPosition;this.extended=t.extended;this.type=t.type;this.finger=true;this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition];if(t.bases){this.addBones(t)}else{o.warnBones()}};s.extend(a.prototype,i.prototype);a.prototype.addBones=function(t){this.metacarpal=new r(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]});this.proximal=new r(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]});this.medial=new r(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]});this.distal=new r(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]});this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]};a.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};a.Invalid={valid:false}},{"./bone":1,"./dialog":6,"./pointable":14,underscore:24}],8:[function(t,e,n){var i=t("./hand"),r=t("./pointable"),o=t("./gesture").createGesture,s=t("gl-matrix"),a=s.mat3,u=s.vec3,c=t("./interaction_box"),l=t("./finger"),f=t("underscore");var h=e.exports=function(t){this.valid=true;this.id=t.id;this.timestamp=t.timestamp;this.hands=[];this.handsMap={};this.pointables=[];this.tools=[];this.fingers=[];if(t.interactionBox){this.interactionBox=new c(t.interactionBox)}this.gestures=[];this.pointablesMap={};this._translation=t.t;this._rotation=f.flatten(t.r);this._scaleFactor=t.s;this.data=t;this.type="frame";this.currentFrameRate=t.currentFrameRate;if(t.gestures){for(var e=0,n=t.gestures.length;e!=n;e++){this.gestures.push(o(t.gestures[e]))}}this.postprocessData(t)};h.prototype.postprocessData=function(t){if(!t){t=this.data}for(var e=0,n=t.hands.length;e!=n;e++){var o=new i(t.hands[e]);o.frame=this;this.hands.push(o);this.handsMap[o.id]=o}t.pointables=f.sortBy(t.pointables,function(t){return t.id});for(var s=0,a=t.pointables.length;s!=a;s++){var u=t.pointables[s];var c=u.dipPosition?new l(u):new r(u);c.frame=this;this.addPointable(c)}};h.prototype.addPointable=function(t){this.pointables.push(t);this.pointablesMap[t.id]=t;(t.tool?this.tools:this.fingers).push(t);if(t.handId!==undefined&&this.handsMap.hasOwnProperty(t.handId)){var e=this.handsMap[t.handId];e.pointables.push(t);(t.tool?e.tools:e.fingers).push(t);switch(t.type){case 0:e.thumb=t;break;case 1:e.indexFinger=t;break;case 2:e.middleFinger=t;break;case 3:e.ringFinger=t;break;case 4:e.pinky=t;break}}};h.prototype.tool=function(t){var e=this.pointable(t);return e.tool?e:r.Invalid};h.prototype.pointable=function(t){return this.pointablesMap[t]||r.Invalid};h.prototype.finger=function(t){var e=this.pointable(t);return!e.tool?e:r.Invalid};h.prototype.hand=function(t){return this.handsMap[t]||i.Invalid};h.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=this.rotationMatrix(t);var i=(n[0]+n[4]+n[8]-1)*.5;var r=Math.acos(i);r=isNaN(r)?0:r;if(e!==undefined){var o=this.rotationAxis(t);r*=u.dot(o,u.normalize(u.create(),e))}return r};h.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return u.create();return u.normalize(u.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]])};h.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var e=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),t._rotation,e)};h.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;return Math.exp(this._scaleFactor-t._scaleFactor)};h.prototype.translation=function(t){if(!this.valid||!t.valid)return u.create();return u.subtract(u.create(),this._translation,t._translation)};h.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";if(this.gestures)t+=" | Gesture count:("+this.gestures.length+")";t+=" ]";return t};h.prototype.dump=function(){var t="";t+="Frame Info:<br/>";t+=this.toString();t+="<br/><br/>Hands:<br/>";for(var e=0,n=this.hands.length;e!=n;e++){t+="  "+this.hands[e].toString()+"<br/>"}t+="<br/><br/>Pointables:<br/>";for(var i=0,r=this.pointables.length;i!=r;i++){t+="  "+this.pointables[i].toString()+"<br/>"}if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var o=0,s=this.gestures.length;o!=s;o++){t+="  "+this.gestures[o].toString()+"<br/>"}}t+="<br/><br/>Raw JSON:<br/>";t+=JSON.stringify(this.data);return t};h.Invalid={valid:false,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},hand:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return u.create()},scaleFactor:function(){return 1},translation:function(){return u.create()}}},{"./finger":7,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"gl-matrix":23,underscore:24}],9:[function(t,e,n){var i=t("gl-matrix"),r=i.vec3,o=t("events").EventEmitter,s=t("underscore");var a=n.createGesture=function(t){var e;switch(t.type){case"circle":e=new l(t);break;case"swipe":e=new f(t);break;case"screenTap":e=new h(t);break;case"keyTap":e=new p(t);break;default:throw"unknown gesture type"}e.id=t.id;e.handIds=t.handIds.slice();e.pointableIds=t.pointableIds.slice();e.duration=t.duration;e.state=t.state;e.type=t.type;return e};var u=n.gestureListener=function(t,e){var n={};var i={};t.on("gesture",function(t,r){if(t.type==e){if(t.state=="start"||t.state=="stop"){if(i[t.id]===undefined){var o=new c(t,r);i[t.id]=o;s.each(n,function(t,e){o.on(e,t)})}}i[t.id].update(t,r);if(t.state=="stop"){delete i[t.id]}}});var r={start:function(t){n["start"]=t;return r},stop:function(t){n["stop"]=t;return r},complete:function(t){n["stop"]=t;return r},update:function(t){n["update"]=t;return r}};return r};var c=n.Gesture=function(t,e){this.gestures=[t];this.frames=[e]};c.prototype.update=function(t,e){this.lastGesture=t;this.lastFrame=e;this.gestures.push(t);this.frames.push(e);this.emit(t.state,this)};c.prototype.translation=function(){return r.subtract(r.create(),this.lastGesture.startPosition,this.lastGesture.position)};s.extend(c.prototype,o.prototype);var l=function(t){this.center=t.center;this.normal=t.normal;this.progress=t.progress;this.radius=t.radius};l.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var f=function(t){this.startPosition=t.startPosition;this.position=t.position;this.direction=t.direction;this.speed=t.speed};f.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var h=function(t){this.position=t.position;this.direction=t.direction;this.progress=t.progress};h.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var p=function(t){this.position=t.position;this.direction=t.direction;this.progress=t.progress};p.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:21,"gl-matrix":23,underscore:24}],10:[function(t,e,n){var i=t("./pointable"),r=t("./bone"),o=t("gl-matrix"),s=o.mat3,a=o.vec3,u=t("underscore");var c=e.exports=function(t){this.id=t.id;this.palmPosition=t.palmPosition;this.direction=t.direction;this.palmVelocity=t.palmVelocity;this.palmNormal=t.palmNormal;this.sphereCenter=t.sphereCenter;this.sphereRadius=t.sphereRadius;this.valid=true;this.pointables=[];this.fingers=[];if(t.armBasis){this.arm=new r(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis})}else{this.arm=null}this.tools=[];this._translation=t.t;this._rotation=u.flatten(t.r);this._scaleFactor=t.s;this.timeVisible=t.timeVisible;this.stabilizedPalmPosition=t.stabilizedPalmPosition;this.type=t.type;this.grabStrength=t.grabStrength;this.pinchStrength=t.pinchStrength;this.confidence=t.confidence};c.prototype.finger=function(t){var e=this.frame.finger(t);return e&&e.handId==this.id?e:i.Invalid};c.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=t.hand(this.id);if(!n.valid)return 0;var i=this.rotationMatrix(t);var r=(i[0]+i[4]+i[8]-1)*.5;var o=Math.acos(r);o=isNaN(o)?0:o;if(e!==undefined){var s=this.rotationAxis(t);o*=a.dot(s,a.normalize(a.create(),e))}return o};c.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);if(!e.valid)return a.create();return a.normalize(a.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]])};c.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);if(!e.valid)return s.create();var n=s.transpose(s.create(),this._rotation);var i=s.multiply(s.create(),e._rotation,n);return i};c.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var e=t.hand(this.id);if(!e.valid)return 1;return Math.exp(this._scaleFactor-e._scaleFactor)};c.prototype.translation=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);if(!e.valid)return a.create();return[this._translation[0]-e._translation[0],this._translation[1]-e._translation[1],this._translation[2]-e._translation[2]]};c.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "};c.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])};c.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])};c.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])};c.Invalid={valid:false,fingers:[],tools:[],pointables:[],left:false,pointable:function(){return i.Invalid},finger:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":23,underscore:24}],11:[function(t,e,n){e.exports={Controller:t("./controller"),Frame:t("./frame"),Gesture:t("./gesture"),Hand:t("./hand"),Pointable:t("./pointable"),Finger:t("./finger"),InteractionBox:t("./interaction_box"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),JSONProtocol:t("./protocol").JSONProtocol,glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:undefined,version:t("./version.js"),_:t("underscore"),EventEmitter:t("events").EventEmitter,loop:function(t,e){if(t&&e===undefined&&{}.toString.call(t)==="[object Function]"){e=t;t={}}if(this.loopController){if(t){this.loopController.setupFrameEvents(t)}}else{this.loopController=new this.Controller(t)}this.loopController.loop(e);return this.loopController},plugin:function(t,e){this.Controller.plugin(t,e)}}},{"./circular_buffer":2,"./controller":5,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:21,"gl-matrix":23,underscore:24}],12:[function(t,e,n){var i=t("gl-matrix"),r=i.vec3;var o=e.exports=function(t){this.valid=true;this.center=t.center;this.size=t.size;this.width=t.size[0];this.height=t.size[1];this.depth=t.size[2]};o.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])};o.prototype.normalizePoint=function(t,e){var n=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);if(e){n[0]=Math.min(Math.max(n[0],0),1);n[1]=Math.min(Math.max(n[1],0),1);n[2]=Math.min(Math.max(n[2],0),1)}return n};o.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"};o.Invalid={valid:false}},{"gl-matrix":23}],13:[function(t,e,n){var i=e.exports=function(t){this.steps=[];this.controller=t};i.prototype.addStep=function(t){this.steps.push(t)};i.prototype.run=function(t){var e=this.steps.length;for(var n=0;n!=e;n++){if(!t)break;t=this.steps[n](t)}return t};i.prototype.removeStep=function(t){var e=this.steps.indexOf(t);if(e===-1)throw"Step not found in pipeline";this.steps.splice(e,1)};i.prototype.addWrappedStep=function(t,e){var n=this.controller,i=function(i){var r,o,s;r=t=="frame"?[i]:i[t+"s"]||[];for(o=0,s=r.length;o<s;o++){e.call(n,r[o])}return i};this.addStep(i);return i}},{}],14:[function(t,e,n){var i=t("gl-matrix"),r=i.vec3;var o=e.exports=function(t){this.valid=true;this.id=t.id;this.handId=t.handId;this.length=t.length;this.tool=t.tool;this.width=t.width;this.direction=t.direction;this.stabilizedTipPosition=t.stabilizedTipPosition;this.tipPosition=t.tipPosition;this.tipVelocity=t.tipVelocity;this.touchZone=t.touchZone;this.touchDistance=t.touchDistance;this.timeVisible=t.timeVisible};o.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};o.prototype.hand=function(){return this.frame.hand(this.handId)};o.Invalid={valid:false}},{"gl-matrix":23}],15:[function(t,e,n){var i=t("./frame"),r=t("./hand"),o=t("./pointable"),s=t("./finger"),a=t("underscore"),u=t("events").EventEmitter;var c=function(t){this.type=t.type;this.state=t.state};n.chooseProtocol=function(t){var e;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:e=l(t);e.sendBackground=function(t,n){t.send(e.encode({background:n}))};e.sendFocused=function(t,n){t.send(e.encode({focused:n}))};e.sendOptimizeHMD=function(t,n){t.send(e.encode({optimizeHMD:n}))};break;default:throw"unrecognized version"}return e};var l=n.JSONProtocol=function(t){var e=function(t){if(t.event){return new c(t.event)}else{e.emit("beforeFrameCreated",t);var n=new i(t);e.emit("afterFrameCreated",n,t);return n}};e.encode=function(t){return JSON.stringify(t)};e.version=t.version;e.serviceVersion=t.serviceVersion;e.versionLong="Version "+t.version;e.type="protocol";a.extend(e,u.prototype);return e}},{"./finger":7,"./frame":8,"./hand":10,"./pointable":14,events:21,underscore:24}],16:[function(t,e,n){n.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(t,e,n){var i=e.exports=function(){return function(t){var e=t.pointables.sort(function(t,e){return t.z-e.z})[0];if(e&&e.valid){t.cursorPosition=e.tipPosition}return t}}},{}],18:[function(t,e,n){var i=t("events").EventEmitter,r=t("underscore");var o=e.exports=function(t,e){this.start=new Vector(t);this.end=new Vector(e);this.enteredFrame=null};o.prototype.hasPointables=function(t){for(var e=0;e!=t.pointables.length;e++){var n=t.pointables[e].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z){return true}}return false};o.prototype.listener=function(t){var e=this;if(t&&t.nearThreshold)this.setupNearRegion(t.nearThreshold);return function(t){return e.updatePosition(t)}};o.prototype.clipper=function(){var t=this;return function(e){t.updatePosition(e);return t.enteredFrame?e:null}};o.prototype.setupNearRegion=function(t){var e=this.nearRegion=new o([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]);var n=this;e.on("enter",function(t){n.emit("near",t)});e.on("exit",function(t){n.emit("far",t)});n.on("exit",function(t){n.emit("near",t)})};o.prototype.updatePosition=function(t){if(this.nearRegion)this.nearRegion.updatePosition(t);if(this.hasPointables(t)&&this.enteredFrame==null){this.enteredFrame=t;this.emit("enter",this.enteredFrame)}else if(!this.hasPointables(t)&&this.enteredFrame!=null){this.enteredFrame=null;this.emit("exit",this.enteredFrame)}return t};o.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])};o.prototype.mapToXY=function(t,e,n){var i=this.normalize(t);var r=i.x,o=i.y;if(r>1)r=1;else if(r<-1)r=-1;if(o>1)o=1;else if(o<-1)o=-1;return[(r+1)/2*e,(1-o)/2*n,i.z]};r.extend(o.prototype,i.prototype)},{events:21,underscore:24}],19:[function(t,e,n){e.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],20:[function(t,e,n){},{}],21:[function(t,e,n){var i=t("__browserify_process");if(!i.EventEmitter)i.EventEmitter=function(){};var r=n.EventEmitter=i.EventEmitter;var o=typeof Array.isArray==="function"?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"};function s(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++){if(e===t[n])return n}return-1}var a=10;r.prototype.setMaxListeners=function(t){if(!this._events)this._events={};this._events.maxListeners=t};r.prototype.emit=function(t){if(t==="error"){if(!this._events||!this._events.error||o(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var e=this._events[t];if(!e)return false;if(typeof e=="function"){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return true}else if(o(e)){var n=Array.prototype.slice.call(arguments,1);var i=e.slice();for(var r=0,s=i.length;r<s;r++){i[r].apply(this,n)}return true}else{return false}};r.prototype.addListener=function(t,e){if("function"!==typeof e){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",t,e);if(!this._events[t]){this._events[t]=e}else if(o(this._events[t])){if(!this._events[t].warned){var n;if(this._events.maxListeners!==undefined){n=this._events.maxListeners}else{n=a}if(n&&n>0&&this._events[t].length>n){this._events[t].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[t].length);console.trace()}}this._events[t].push(e)}else{this._events[t]=[this._events[t],e]}return this};r.prototype.on=r.prototype.addListener;r.prototype.once=function(t,e){var n=this;n.on(t,function i(){n.removeListener(t,i);e.apply(this,arguments)});return this};r.prototype.removeListener=function(t,e){if("function"!==typeof e){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[t])return this;var n=this._events[t];if(o(n)){var i=s(n,e);if(i<0)return this;n.splice(i,1);if(n.length==0)delete this._events[t]}else if(this._events[t]===e){delete this._events[t]}return this};r.prototype.removeAllListeners=function(t){if(arguments.length===0){this._events={};return this}if(t&&this._events&&this._events[t])this._events[t]=null;return this};r.prototype.listeners=function(t){if(!this._events)this._events={};if(!this._events[t])this._events[t]=[];if(!o(this._events[t])){this._events[t]=[this._events[t]]}return this._events[t]};r.listenerCount=function(t,e){var n;if(!t._events||!t._events[e])n=0;else if(typeof t._events[e]==="function")n=1;else n=t._events[e].length;return n}},{__browserify_process:22}],22:[function(t,e,n){var i=e.exports={};i.nextTick=function(){var t=typeof window!=="undefined"&&window.setImmediate;var e=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(t){return function(t){return window.setImmediate(t)}}if(e){var n=[];window.addEventListener("message",function(t){var e=t.source;if((e===window||e===null)&&t.data==="process-tick"){t.stopPropagation();if(n.length>0){var i=n.shift();i()}}},true);return function i(t){n.push(t);window.postMessage("process-tick","*")}}return function r(t){setTimeout(t,0)}}();i.title="browser";i.browser=true;i.env={};i.argv=[];i.binding=function(t){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],23:[function(t,e,n){(function(t){"use strict";var e={};if(typeof n==="undefined"){if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){e.exports={};define(function(){return e.exports})}else{e.exports=typeof window!=="undefined"?window:t}}else{e.exports=n}(function(t){if(!e){var e=1e-6}if(!n){var n=typeof Float32Array!=="undefined"?Float32Array:Array}if(!i){var i=Math.random}var r={};r.setMatrixArrayType=function(t){n=t};if(typeof t!=="undefined"){t.glMatrix=r}var o=Math.PI/180;r.toRadian=function(t){return t*o};var s={};s.create=function(){var t=new n(2);t[0]=0;t[1]=0;return t};s.clone=function(t){var e=new n(2);e[0]=t[0];e[1]=t[1];return e};s.fromValues=function(t,e){var i=new n(2);i[0]=t;i[1]=e;return i};s.copy=function(t,e){t[0]=e[0];t[1]=e[1];return t};s.set=function(t,e,n){t[0]=e;t[1]=n;return t};s.add=function(t,e,n){t[0]=e[0]+n[0];t[1]=e[1]+n[1];return t};s.subtract=function(t,e,n){t[0]=e[0]-n[0];t[1]=e[1]-n[1];return t};s.sub=s.subtract;s.multiply=function(t,e,n){t[0]=e[0]*n[0];t[1]=e[1]*n[1];return t};s.mul=s.multiply;s.divide=function(t,e,n){t[0]=e[0]/n[0];t[1]=e[1]/n[1];return t};s.div=s.divide;s.min=function(t,e,n){t[0]=Math.min(e[0],n[0]);t[1]=Math.min(e[1],n[1]);return t};s.max=function(t,e,n){t[0]=Math.max(e[0],n[0]);t[1]=Math.max(e[1],n[1]);return t};s.scale=function(t,e,n){t[0]=e[0]*n;t[1]=e[1]*n;return t};s.scaleAndAdd=function(t,e,n,i){t[0]=e[0]+n[0]*i;t[1]=e[1]+n[1]*i;return t};s.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)};s.dist=s.distance;s.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i};s.sqrDist=s.squaredDistance;s.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)};s.len=s.length;s.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n};s.sqrLen=s.squaredLength;s.negate=function(t,e){t[0]=-e[0];t[1]=-e[1];return t};s.normalize=function(t,e){var n=e[0],i=e[1];var r=n*n+i*i;if(r>0){r=1/Math.sqrt(r);t[0]=e[0]*r;t[1]=e[1]*r}return t};s.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]};s.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];t[0]=t[1]=0;t[2]=i;return t};s.lerp=function(t,e,n,i){var r=e[0],o=e[1];t[0]=r+i*(n[0]-r);t[1]=o+i*(n[1]-o);return t};s.random=function(t,e){e=e||1;var n=i()*2*Math.PI;t[0]=Math.cos(n)*e;t[1]=Math.sin(n)*e;return t};s.transformMat2=function(t,e,n){var i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r;t[1]=n[1]*i+n[3]*r;return t};s.transformMat2d=function(t,e,n){var i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r+n[4];t[1]=n[1]*i+n[3]*r+n[5];return t};s.transformMat3=function(t,e,n){var i=e[0],r=e[1];t[0]=n[0]*i+n[3]*r+n[6];t[1]=n[1]*i+n[4]*r+n[7];return t};s.transformMat4=function(t,e,n){var i=e[0],r=e[1];t[0]=n[0]*i+n[4]*r+n[12];t[1]=n[1]*i+n[5]*r+n[13];return t};s.forEach=function(){var t=s.create();return function(e,n,i,r,o,s){var a,u;if(!n){n=2}if(!i){i=0}if(r){u=Math.min(r*n+i,e.length)}else{u=e.length}for(a=i;a<u;a+=n){t[0]=e[a];t[1]=e[a+1];o(t,t,s);e[a]=t[0];e[a+1]=t[1]}return e}}();s.str=function(t){return"vec2("+t[0]+", "+t[1]+")"};if(typeof t!=="undefined"){t.vec2=s}var a={};a.create=function(){var t=new n(3);t[0]=0;t[1]=0;t[2]=0;return t};a.clone=function(t){var e=new n(3);e[0]=t[0];e[1]=t[1];e[2]=t[2];return e};a.fromValues=function(t,e,i){var r=new n(3);r[0]=t;r[1]=e;r[2]=i;return r};a.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];return t};a.set=function(t,e,n,i){t[0]=e;t[1]=n;t[2]=i;return t};a.add=function(t,e,n){t[0]=e[0]+n[0];t[1]=e[1]+n[1];t[2]=e[2]+n[2];return t};a.subtract=function(t,e,n){t[0]=e[0]-n[0];t[1]=e[1]-n[1];t[2]=e[2]-n[2];return t};a.sub=a.subtract;a.multiply=function(t,e,n){t[0]=e[0]*n[0];t[1]=e[1]*n[1];t[2]=e[2]*n[2];return t};a.mul=a.multiply;a.divide=function(t,e,n){t[0]=e[0]/n[0];t[1]=e[1]/n[1];t[2]=e[2]/n[2];return t};a.div=a.divide;a.min=function(t,e,n){t[0]=Math.min(e[0],n[0]);t[1]=Math.min(e[1],n[1]);t[2]=Math.min(e[2],n[2]);return t};a.max=function(t,e,n){t[0]=Math.max(e[0],n[0]);t[1]=Math.max(e[1],n[1]);t[2]=Math.max(e[2],n[2]);return t};a.scale=function(t,e,n){t[0]=e[0]*n;t[1]=e[1]*n;t[2]=e[2]*n;return t};a.scaleAndAdd=function(t,e,n,i){t[0]=e[0]+n[0]*i;t[1]=e[1]+n[1]*i;t[2]=e[2]+n[2]*i;return t};a.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)};a.dist=a.distance;a.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r};a.sqrDist=a.squaredDistance;a.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)};a.len=a.length;a.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i};a.sqrLen=a.squaredLength;a.negate=function(t,e){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];return t};a.normalize=function(t,e){var n=e[0],i=e[1],r=e[2];var o=n*n+i*i+r*r;if(o>0){o=1/Math.sqrt(o);t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o}return t};a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]};a.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2];t[0]=r*u-o*a;t[1]=o*s-i*u;t[2]=i*a-r*s;return t};a.lerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2];t[0]=r+i*(n[0]-r);t[1]=o+i*(n[1]-o);t[2]=s+i*(n[2]-s);return t};a.random=function(t,e){e=e||1;var n=i()*2*Math.PI;var r=i()*2-1;var o=Math.sqrt(1-r*r)*e;t[0]=Math.cos(n)*o;t[1]=Math.sin(n)*o;t[2]=r*e;return t};a.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2];t[0]=n[0]*i+n[4]*r+n[8]*o+n[12];t[1]=n[1]*i+n[5]*r+n[9]*o+n[13];t[2]=n[2]*i+n[6]*r+n[10]*o+n[14];return t};a.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];t[0]=i*n[0]+r*n[3]+o*n[6];t[1]=i*n[1]+r*n[4]+o*n[7];t[2]=i*n[2]+r*n[5]+o*n[8];return t};a.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*i+a*o-u*r,f=c*r+u*i-s*o,h=c*o+s*r-a*i,p=-s*i-a*r-u*o;t[0]=l*c+p*-s+f*-u-h*-a;t[1]=f*c+p*-a+h*-s-l*-u;t[2]=h*c+p*-u+l*-a-f*-s;return t};a.rotateX=function(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0];r[1]=e[1]-n[1];r[2]=e[2]-n[2];o[0]=r[0];o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i);o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i);t[0]=o[0]+n[0];t[1]=o[1]+n[1];t[2]=o[2]+n[2];return t};a.rotateY=function(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0];r[1]=e[1]-n[1];r[2]=e[2]-n[2];o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i);o[1]=r[1];o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i);t[0]=o[0]+n[0];t[1]=o[1]+n[1];t[2]=o[2]+n[2];return t};a.rotateZ=function(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0];r[1]=e[1]-n[1];r[2]=e[2]-n[2];o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i);o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i);o[2]=r[2];t[0]=o[0]+n[0];t[1]=o[1]+n[1];t[2]=o[2]+n[2];return t};a.forEach=function(){var t=a.create();return function(e,n,i,r,o,s){var a,u;if(!n){n=3}if(!i){i=0}if(r){u=Math.min(r*n+i,e.length)}else{u=e.length}for(a=i;a<u;a+=n){t[0]=e[a];t[1]=e[a+1];t[2]=e[a+2];o(t,t,s);e[a]=t[0];e[a+1]=t[1];e[a+2]=t[2]}return e}}();a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"};if(typeof t!=="undefined"){t.vec3=a}var u={};u.create=function(){var t=new n(4);t[0]=0;t[1]=0;t[2]=0;t[3]=0;return t};u.clone=function(t){var e=new n(4);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e};u.fromValues=function(t,e,i,r){var o=new n(4);o[0]=t;o[1]=e;o[2]=i;o[3]=r;return o};u.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t};u.set=function(t,e,n,i,r){t[0]=e;t[1]=n;t[2]=i;t[3]=r;return t};u.add=function(t,e,n){t[0]=e[0]+n[0];t[1]=e[1]+n[1];t[2]=e[2]+n[2];t[3]=e[3]+n[3];return t};u.subtract=function(t,e,n){t[0]=e[0]-n[0];t[1]=e[1]-n[1];t[2]=e[2]-n[2];t[3]=e[3]-n[3];return t};u.sub=u.subtract;u.multiply=function(t,e,n){t[0]=e[0]*n[0];t[1]=e[1]*n[1];t[2]=e[2]*n[2];t[3]=e[3]*n[3];return t};u.mul=u.multiply;u.divide=function(t,e,n){t[0]=e[0]/n[0];t[1]=e[1]/n[1];t[2]=e[2]/n[2];t[3]=e[3]/n[3];return t};u.div=u.divide;u.min=function(t,e,n){t[0]=Math.min(e[0],n[0]);t[1]=Math.min(e[1],n[1]);t[2]=Math.min(e[2],n[2]);t[3]=Math.min(e[3],n[3]);return t};u.max=function(t,e,n){t[0]=Math.max(e[0],n[0]);t[1]=Math.max(e[1],n[1]);t[2]=Math.max(e[2],n[2]);t[3]=Math.max(e[3],n[3]);return t};u.scale=function(t,e,n){t[0]=e[0]*n;t[1]=e[1]*n;t[2]=e[2]*n;t[3]=e[3]*n;return t};u.scaleAndAdd=function(t,e,n,i){t[0]=e[0]+n[0]*i;t[1]=e[1]+n[1]*i;t[2]=e[2]+n[2]*i;t[3]=e[3]+n[3]*i;return t};u.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)};u.dist=u.distance;u.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o};u.sqrDist=u.squaredDistance;u.length=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)};u.len=u.length;u.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r};u.sqrLen=u.squaredLength;u.negate=function(t,e){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=-e[3];return t};u.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];var s=n*n+i*i+r*r+o*o;if(s>0){s=1/Math.sqrt(s);t[0]=e[0]*s;t[1]=e[1]*s;t[2]=e[2]*s;t[3]=e[3]*s}return t};u.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]};u.lerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];t[0]=r+i*(n[0]-r);t[1]=o+i*(n[1]-o);t[2]=s+i*(n[2]-s);t[3]=a+i*(n[3]-a);return t};u.random=function(t,e){e=e||1;t[0]=i();t[1]=i();t[2]=i();t[3]=i();u.normalize(t,t);u.scale(t,t,e);return t};u.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s;t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s;t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s;t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s;return t};u.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*i+a*o-u*r,f=c*r+u*i-s*o,h=c*o+s*r-a*i,p=-s*i-a*r-u*o;t[0]=l*c+p*-s+f*-u-h*-a;t[1]=f*c+p*-a+h*-s-l*-u;t[2]=h*c+p*-u+l*-a-f*-s;return t};u.forEach=function(){var t=u.create();return function(e,n,i,r,o,s){var a,u;if(!n){n=4}if(!i){i=0}if(r){u=Math.min(r*n+i,e.length)}else{u=e.length}for(a=i;a<u;a+=n){t[0]=e[a];t[1]=e[a+1];t[2]=e[a+2];t[3]=e[a+3];o(t,t,s);e[a]=t[0];e[a+1]=t[1];e[a+2]=t[2];e[a+3]=t[3]}return e}}();u.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};if(typeof t!=="undefined"){t.vec4=u}var c={};c.create=function(){var t=new n(4);t[0]=1;t[1]=0;t[2]=0;t[3]=1;return t};c.clone=function(t){var e=new n(4);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e};c.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t};c.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;return t};c.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2];t[2]=n}else{t[0]=e[0];t[1]=e[2];t[2]=e[1];t[3]=e[3]}return t};c.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*o-r*i;if(!s){return null}s=1/s;t[0]=o*s;t[1]=-i*s;t[2]=-r*s;t[3]=n*s;return t};c.adjoint=function(t,e){var n=e[0];t[0]=e[3];t[1]=-e[1];t[2]=-e[2];t[3]=n;return t};c.determinant=function(t){return t[0]*t[3]-t[2]*t[1]};c.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];var a=n[0],u=n[1],c=n[2],l=n[3];t[0]=i*a+o*u;t[1]=r*a+s*u;t[2]=i*c+o*l;t[3]=r*c+s*l;return t};c.mul=c.multiply;c.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);t[0]=i*u+o*a;t[1]=r*u+s*a;t[2]=i*-a+o*u;t[3]=r*-a+s*u;return t};c.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1];t[0]=i*a;t[1]=r*a;t[2]=o*u;t[3]=s*u;return t};c.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))};c.LDU=function(t,e,n,i){
t[2]=i[2]/i[0];n[0]=i[0];n[1]=i[1];n[3]=i[3]-t[2]*n[1];return[t,e,n]};if(typeof t!=="undefined"){t.mat2=c}var l={};l.create=function(){var t=new n(6);t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t};l.clone=function(t){var e=new n(6);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];return e};l.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return t};l.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t};l.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5];var u=n*o-i*r;if(!u){return null}u=1/u;t[0]=o*u;t[1]=-i*u;t[2]=-r*u;t[3]=n*u;t[4]=(r*a-o*s)*u;t[5]=(i*s-n*a)*u;return t};l.determinant=function(t){return t[0]*t[3]-t[1]*t[2]};l.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1],f=n[2],h=n[3],p=n[4],d=n[5];t[0]=i*c+o*l;t[1]=r*c+s*l;t[2]=i*f+o*h;t[3]=r*f+s*h;t[4]=i*p+o*d+a;t[5]=r*p+s*d+u;return t};l.mul=l.multiply;l.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);t[0]=i*l+o*c;t[1]=r*l+s*c;t[2]=i*-c+o*l;t[3]=r*-c+s*l;t[4]=a;t[5]=u;return t};l.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];t[0]=i*c;t[1]=r*c;t[2]=o*l;t[3]=s*l;t[4]=a;t[5]=u;return t};l.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];t[0]=i;t[1]=r;t[2]=o;t[3]=s;t[4]=i*c+o*l+a;t[5]=r*c+s*l+u;return t};l.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"};l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};if(typeof t!=="undefined"){t.mat2d=l}var f={};f.create=function(){var t=new n(9);t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=1;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};f.fromMat4=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[4];t[4]=e[5];t[5]=e[6];t[6]=e[8];t[7]=e[9];t[8]=e[10];return t};f.clone=function(t){var e=new n(9);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];return e};f.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};f.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=1;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};f.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3];t[2]=e[6];t[3]=n;t[5]=e[7];t[6]=i;t[7]=r}else{t[0]=e[0];t[1]=e[3];t[2]=e[6];t[3]=e[1];t[4]=e[4];t[5]=e[7];t[6]=e[2];t[7]=e[5];t[8]=e[8]}return t};f.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=l*s-a*c,h=-l*o+a*u,p=c*o-s*u,d=n*f+i*h+r*p;if(!d){return null}d=1/d;t[0]=f*d;t[1]=(-l*i+r*c)*d;t[2]=(a*i-r*s)*d;t[3]=h*d;t[4]=(l*n-r*u)*d;t[5]=(-a*n+r*o)*d;t[6]=p*d;t[7]=(-c*n+i*u)*d;t[8]=(s*n-i*o)*d;return t};f.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8];t[0]=s*l-a*c;t[1]=r*c-i*l;t[2]=i*a-r*s;t[3]=a*u-o*l;t[4]=n*l-r*u;t[5]=r*o-n*a;t[6]=o*c-s*u;t[7]=i*u-n*c;t[8]=n*s-i*o;return t};f.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*o-s*u)+n*(-c*r+s*a)+i*(u*r-o*a)};f.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],w=n[7],b=n[8];t[0]=h*i+p*s+d*c;t[1]=h*r+p*a+d*l;t[2]=h*o+p*u+d*f;t[3]=v*i+m*s+g*c;t[4]=v*r+m*a+g*l;t[5]=v*o+m*u+g*f;t[6]=y*i+w*s+b*c;t[7]=y*r+w*a+b*l;t[8]=y*o+w*u+b*f;return t};f.mul=f.multiply;f.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1];t[0]=i;t[1]=r;t[2]=o;t[3]=s;t[4]=a;t[5]=u;t[6]=h*i+p*s+c;t[7]=h*r+p*a+l;t[8]=h*o+p*u+f;return t};f.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);t[0]=p*i+h*s;t[1]=p*r+h*a;t[2]=p*o+h*u;t[3]=p*s-h*i;t[4]=p*a-h*r;t[5]=p*u-h*o;t[6]=c;t[7]=l;t[8]=f;return t};f.scale=function(t,e,n){var i=n[0],r=n[1];t[0]=i*e[0];t[1]=i*e[1];t[2]=i*e[2];t[3]=r*e[3];t[4]=r*e[4];t[5]=r*e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};f.fromMat2d=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=0;t[3]=e[2];t[4]=e[3];t[5]=0;t[6]=e[4];t[7]=e[5];t[8]=1;return t};f.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,u=r+r,c=n*s,l=i*s,f=i*a,h=r*s,p=r*a,d=r*u,v=o*s,m=o*a,g=o*u;t[0]=1-f-d;t[3]=l-g;t[6]=h+m;t[1]=l+g;t[4]=1-c-d;t[7]=p-v;t[2]=h-m;t[5]=p+v;t[8]=1-c-f;return t};f.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*a-i*s,w=n*u-r*s,b=n*c-o*s,x=i*u-r*a,M=i*c-o*a,E=r*c-o*u,_=l*v-f*d,T=l*m-h*d,C=l*g-p*d,S=f*m-h*v,A=f*g-p*v,P=h*g-p*m,k=y*P-w*A+b*S+x*C-M*T+E*_;if(!k){return null}k=1/k;t[0]=(a*P-u*A+c*S)*k;t[1]=(u*C-s*P-c*T)*k;t[2]=(s*A-a*C+c*_)*k;t[3]=(r*A-i*P-o*S)*k;t[4]=(n*P-r*C+o*T)*k;t[5]=(i*C-n*A-o*_)*k;t[6]=(v*E-m*M+g*x)*k;t[7]=(m*b-d*E-g*w)*k;t[8]=(d*M-v*b+g*y)*k;return t};f.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"};f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};if(typeof t!=="undefined"){t.mat3=f}var h={};h.create=function(){var t=new n(16);t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};h.clone=function(t){var e=new n(16);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e};h.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};h.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};h.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=n;t[6]=e[9];t[7]=e[13];t[8]=i;t[9]=o;t[11]=e[14];t[12]=r;t[13]=s;t[14]=a}else{t[0]=e[0];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=e[1];t[5]=e[5];t[6]=e[9];t[7]=e[13];t[8]=e[2];t[9]=e[6];t[10]=e[10];t[11]=e[14];t[12]=e[3];t[13]=e[7];t[14]=e[11];t[15]=e[15]}return t};h.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*a-i*s,w=n*u-r*s,b=n*c-o*s,x=i*u-r*a,M=i*c-o*a,E=r*c-o*u,_=l*v-f*d,T=l*m-h*d,C=l*g-p*d,S=f*m-h*v,A=f*g-p*v,P=h*g-p*m,k=y*P-w*A+b*S+x*C-M*T+E*_;if(!k){return null}k=1/k;t[0]=(a*P-u*A+c*S)*k;t[1]=(r*A-i*P-o*S)*k;t[2]=(v*E-m*M+g*x)*k;t[3]=(h*M-f*E-p*x)*k;t[4]=(u*C-s*P-c*T)*k;t[5]=(n*P-r*C+o*T)*k;t[6]=(m*b-d*E-g*w)*k;t[7]=(l*E-h*b+p*w)*k;t[8]=(s*A-a*C+c*_)*k;t[9]=(i*C-n*A-o*_)*k;t[10]=(d*M-v*b+g*y)*k;t[11]=(f*b-l*M-p*y)*k;t[12]=(a*T-s*S-u*_)*k;t[13]=(n*S-i*T+r*_)*k;t[14]=(v*w-d*x-m*y)*k;t[15]=(l*x-f*w+h*y)*k;return t};h.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15];t[0]=a*(h*g-p*m)-f*(u*g-c*m)+v*(u*p-c*h);t[1]=-(i*(h*g-p*m)-f*(r*g-o*m)+v*(r*p-o*h));t[2]=i*(u*g-c*m)-a*(r*g-o*m)+v*(r*c-o*u);t[3]=-(i*(u*p-c*h)-a*(r*p-o*h)+f*(r*c-o*u));t[4]=-(s*(h*g-p*m)-l*(u*g-c*m)+d*(u*p-c*h));t[5]=n*(h*g-p*m)-l*(r*g-o*m)+d*(r*p-o*h);t[6]=-(n*(u*g-c*m)-s*(r*g-o*m)+d*(r*c-o*u));t[7]=n*(u*p-c*h)-s*(r*p-o*h)+l*(r*c-o*u);t[8]=s*(f*g-p*v)-l*(a*g-c*v)+d*(a*p-c*f);t[9]=-(n*(f*g-p*v)-l*(i*g-o*v)+d*(i*p-o*f));t[10]=n*(a*g-c*v)-s*(i*g-o*v)+d*(i*c-o*a);t[11]=-(n*(a*p-c*f)-s*(i*p-o*f)+l*(i*c-o*a));t[12]=-(s*(f*m-h*v)-l*(a*m-u*v)+d*(a*h-u*f));t[13]=n*(f*m-h*v)-l*(i*m-r*v)+d*(i*h-r*f);t[14]=-(n*(a*m-u*v)-s*(i*m-r*v)+d*(i*u-r*a));t[15]=n*(a*h-u*f)-s*(i*h-r*f)+l*(i*u-r*a);return t};h.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15],g=e*s-n*o,y=e*a-i*o,w=e*u-r*o,b=n*a-i*s,x=n*u-r*s,M=i*u-r*a,E=c*d-l*p,_=c*v-f*p,T=c*m-h*p,C=l*v-f*d,S=l*m-h*d,A=f*m-h*v;return g*A-y*S+w*C+b*T-x*_+M*E};h.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15];var w=n[0],b=n[1],x=n[2],M=n[3];t[0]=w*i+b*a+x*f+M*v;t[1]=w*r+b*u+x*h+M*m;t[2]=w*o+b*c+x*p+M*g;t[3]=w*s+b*l+x*d+M*y;w=n[4];b=n[5];x=n[6];M=n[7];t[4]=w*i+b*a+x*f+M*v;t[5]=w*r+b*u+x*h+M*m;t[6]=w*o+b*c+x*p+M*g;t[7]=w*s+b*l+x*d+M*y;w=n[8];b=n[9];x=n[10];M=n[11];t[8]=w*i+b*a+x*f+M*v;t[9]=w*r+b*u+x*h+M*m;t[10]=w*o+b*c+x*p+M*g;t[11]=w*s+b*l+x*d+M*y;w=n[12];b=n[13];x=n[14];M=n[15];t[12]=w*i+b*a+x*f+M*v;t[13]=w*r+b*u+x*h+M*m;t[14]=w*o+b*c+x*p+M*g;t[15]=w*s+b*l+x*d+M*y;return t};h.mul=h.multiply;h.translate=function(t,e,n){var i=n[0],r=n[1],o=n[2],s,a,u,c,l,f,h,p,d,v,m,g;if(e===t){t[12]=e[0]*i+e[4]*r+e[8]*o+e[12];t[13]=e[1]*i+e[5]*r+e[9]*o+e[13];t[14]=e[2]*i+e[6]*r+e[10]*o+e[14];t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]}else{s=e[0];a=e[1];u=e[2];c=e[3];l=e[4];f=e[5];h=e[6];p=e[7];d=e[8];v=e[9];m=e[10];g=e[11];t[0]=s;t[1]=a;t[2]=u;t[3]=c;t[4]=l;t[5]=f;t[6]=h;t[7]=p;t[8]=d;t[9]=v;t[10]=m;t[11]=g;t[12]=s*i+l*r+d*o+e[12];t[13]=a*i+f*r+v*o+e[13];t[14]=u*i+h*r+m*o+e[14];t[15]=c*i+p*r+g*o+e[15]}return t};h.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];t[0]=e[0]*i;t[1]=e[1]*i;t[2]=e[2]*i;t[3]=e[3]*i;t[4]=e[4]*r;t[5]=e[5]*r;t[6]=e[6]*r;t[7]=e[7]*r;t[8]=e[8]*o;t[9]=e[9]*o;t[10]=e[10]*o;t[11]=e[11]*o;t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};h.rotate=function(t,n,i,r){var o=r[0],s=r[1],a=r[2],u=Math.sqrt(o*o+s*s+a*a),c,l,f,h,p,d,v,m,g,y,w,b,x,M,E,_,T,C,S,A,P,k,I,F;if(Math.abs(u)<e){return null}u=1/u;o*=u;s*=u;a*=u;c=Math.sin(i);l=Math.cos(i);f=1-l;h=n[0];p=n[1];d=n[2];v=n[3];m=n[4];g=n[5];y=n[6];w=n[7];b=n[8];x=n[9];M=n[10];E=n[11];_=o*o*f+l;T=s*o*f+a*c;C=a*o*f-s*c;S=o*s*f-a*c;A=s*s*f+l;P=a*s*f+o*c;k=o*a*f+s*c;I=s*a*f-o*c;F=a*a*f+l;t[0]=h*_+m*T+b*C;t[1]=p*_+g*T+x*C;t[2]=d*_+y*T+M*C;t[3]=v*_+w*T+E*C;t[4]=h*S+m*A+b*P;t[5]=p*S+g*A+x*P;t[6]=d*S+y*A+M*P;t[7]=v*S+w*A+E*P;t[8]=h*k+m*I+b*F;t[9]=p*k+g*I+x*F;t[10]=d*k+y*I+M*F;t[11]=v*k+w*I+E*F;if(n!==t){t[12]=n[12];t[13]=n[13];t[14]=n[14];t[15]=n[15]}return t};h.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];if(e!==t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}t[4]=o*r+c*i;t[5]=s*r+l*i;t[6]=a*r+f*i;t[7]=u*r+h*i;t[8]=c*r-o*i;t[9]=l*r-s*i;t[10]=f*r-a*i;t[11]=h*r-u*i;return t};h.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];if(e!==t){t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}t[0]=o*r-c*i;t[1]=s*r-l*i;t[2]=a*r-f*i;t[3]=u*r-h*i;t[8]=o*i+c*r;t[9]=s*i+l*r;t[10]=a*i+f*r;t[11]=u*i+h*r;return t};h.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];if(e!==t){t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}t[0]=o*r+c*i;t[1]=s*r+l*i;t[2]=a*r+f*i;t[3]=u*r+h*i;t[4]=c*r-o*i;t[5]=l*r-s*i;t[6]=f*r-a*i;t[7]=h*r-u*i;return t};h.fromRotationTranslation=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=i+i,u=r+r,c=o+o,l=i*a,f=i*u,h=i*c,p=r*u,d=r*c,v=o*c,m=s*a,g=s*u,y=s*c;t[0]=1-(p+v);t[1]=f+y;t[2]=h-g;t[3]=0;t[4]=f-y;t[5]=1-(l+v);t[6]=d+m;t[7]=0;t[8]=h+g;t[9]=d-m;t[10]=1-(l+p);t[11]=0;t[12]=n[0];t[13]=n[1];t[14]=n[2];t[15]=1;return t};h.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,u=r+r,c=n*s,l=i*s,f=i*a,h=r*s,p=r*a,d=r*u,v=o*s,m=o*a,g=o*u;t[0]=1-f-d;t[1]=l+g;t[2]=h-m;t[3]=0;t[4]=l-g;t[5]=1-c-d;t[6]=p+v;t[7]=0;t[8]=h+m;t[9]=p-v;t[10]=1-c-f;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};h.frustum=function(t,e,n,i,r,o,s){var a=1/(n-e),u=1/(r-i),c=1/(o-s);t[0]=o*2*a;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=o*2*u;t[6]=0;t[7]=0;t[8]=(n+e)*a;t[9]=(r+i)*u;t[10]=(s+o)*c;t[11]=-1;t[12]=0;t[13]=0;t[14]=s*o*2*c;t[15]=0;return t};h.perspective=function(t,e,n,i,r){var o=1/Math.tan(e/2),s=1/(i-r);t[0]=o/n;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=o;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=(r+i)*s;t[11]=-1;t[12]=0;t[13]=0;t[14]=2*r*i*s;t[15]=0;return t};h.ortho=function(t,e,n,i,r,o,s){var a=1/(e-n),u=1/(i-r),c=1/(o-s);t[0]=-2*a;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=-2*u;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=2*c;t[11]=0;t[12]=(e+n)*a;t[13]=(r+i)*u;t[14]=(s+o)*c;t[15]=1;return t};h.lookAt=function(t,n,i,r){var o,s,a,u,c,l,f,p,d,v,m=n[0],g=n[1],y=n[2],w=r[0],b=r[1],x=r[2],M=i[0],E=i[1],_=i[2];if(Math.abs(m-M)<e&&Math.abs(g-E)<e&&Math.abs(y-_)<e){return h.identity(t)}f=m-M;p=g-E;d=y-_;v=1/Math.sqrt(f*f+p*p+d*d);f*=v;p*=v;d*=v;o=b*d-x*p;s=x*f-w*d;a=w*p-b*f;v=Math.sqrt(o*o+s*s+a*a);if(!v){o=0;s=0;a=0}else{v=1/v;o*=v;s*=v;a*=v}u=p*a-d*s;c=d*o-f*a;l=f*s-p*o;v=Math.sqrt(u*u+c*c+l*l);if(!v){u=0;c=0;l=0}else{v=1/v;u*=v;c*=v;l*=v}t[0]=o;t[1]=u;t[2]=f;t[3]=0;t[4]=s;t[5]=c;t[6]=p;t[7]=0;t[8]=a;t[9]=l;t[10]=d;t[11]=0;t[12]=-(o*m+s*g+a*y);t[13]=-(u*m+c*g+l*y);t[14]=-(f*m+p*g+d*y);t[15]=1;return t};h.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"};h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};if(typeof t!=="undefined"){t.mat4=h}var p={};p.create=function(){var t=new n(4);t[0]=0;t[1]=0;t[2]=0;t[3]=1;return t};p.rotationTo=function(){var t=a.create();var e=a.fromValues(1,0,0);var n=a.fromValues(0,1,0);return function(i,r,o){var s=a.dot(r,o);if(s<-.999999){a.cross(t,e,r);if(a.length(t)<1e-6)a.cross(t,n,r);a.normalize(t,t);p.setAxisAngle(i,t,Math.PI);return i}else if(s>.999999){i[0]=0;i[1]=0;i[2]=0;i[3]=1;return i}else{a.cross(t,r,o);i[0]=t[0];i[1]=t[1];i[2]=t[2];i[3]=1+s;return p.normalize(i,i)}}}();p.setAxes=function(){var t=f.create();return function(e,n,i,r){t[0]=i[0];t[3]=i[1];t[6]=i[2];t[1]=r[0];t[4]=r[1];t[7]=r[2];t[2]=-n[0];t[5]=-n[1];t[8]=-n[2];return p.normalize(e,p.fromMat3(e,t))}}();p.clone=u.clone;p.fromValues=u.fromValues;p.copy=u.copy;p.set=u.set;p.identity=function(t){t[0]=0;t[1]=0;t[2]=0;t[3]=1;return t};p.setAxisAngle=function(t,e,n){n=n*.5;var i=Math.sin(n);t[0]=i*e[0];t[1]=i*e[1];t[2]=i*e[2];t[3]=Math.cos(n);return t};p.add=u.add;p.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];t[0]=i*l+s*a+r*c-o*u;t[1]=r*l+s*u+o*a-i*c;t[2]=o*l+s*c+i*u-r*a;t[3]=s*l-i*a-r*u-o*c;return t};p.mul=p.multiply;p.scale=u.scale;p.rotateX=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);t[0]=i*u+s*a;t[1]=r*u+o*a;t[2]=o*u-r*a;t[3]=s*u-i*a;return t};p.rotateY=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);t[0]=i*u-o*a;t[1]=r*u+s*a;t[2]=o*u+i*a;t[3]=s*u-r*a;return t};p.rotateZ=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);t[0]=i*u+r*a;t[1]=r*u-i*a;t[2]=o*u+s*a;t[3]=s*u-o*a;return t};p.calculateW=function(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n;t[1]=i;t[2]=r;t[3]=-Math.sqrt(Math.abs(1-n*n-i*i-r*r));return t};p.dot=u.dot;p.lerp=u.lerp;p.slerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3],u=n[0],c=n[1],l=n[2],f=n[3];var h,p,d,v,m;p=r*u+o*c+s*l+a*f;if(p<0){p=-p;u=-u;c=-c;l=-l;f=-f}if(1-p>1e-6){h=Math.acos(p);d=Math.sin(h);v=Math.sin((1-i)*h)/d;m=Math.sin(i*h)/d}else{v=1-i;m=i}t[0]=v*r+m*u;t[1]=v*o+m*c;t[2]=v*s+m*l;t[3]=v*a+m*f;return t};p.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;t[0]=-n*a;t[1]=-i*a;t[2]=-r*a;t[3]=o*a;return t};p.conjugate=function(t,e){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=e[3];return t};p.length=u.length;p.len=p.length;p.squaredLength=u.squaredLength;p.sqrLen=p.squaredLength;p.normalize=u.normalize;p.fromMat3=function(t,e){var n=e[0]+e[4]+e[8];var i;if(n>0){i=Math.sqrt(n+1);t[3]=.5*i;i=.5/i;t[0]=(e[7]-e[5])*i;t[1]=(e[2]-e[6])*i;t[2]=(e[3]-e[1])*i}else{var r=0;if(e[4]>e[0])r=1;if(e[8]>e[r*3+r])r=2;var o=(r+1)%3;var s=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[o*3+o]-e[s*3+s]+1);t[r]=.5*i;i=.5/i;t[3]=(e[s*3+o]-e[o*3+s])*i;t[o]=(e[o*3+r]+e[r*3+o])*i;t[s]=(e[s*3+r]+e[r*3+s])*i}return t};p.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};if(typeof t!=="undefined"){t.quat=p}})(e.exports)})(this)},{}],24:[function(t,e,n){(function(){var t=this;var i=t._;var r={};var o=Array.prototype,s=Object.prototype,a=Function.prototype;var u=o.push,c=o.slice,l=o.concat,f=s.toString,h=s.hasOwnProperty;var p=o.forEach,d=o.map,v=o.reduce,m=o.reduceRight,g=o.filter,y=o.every,w=o.some,b=o.indexOf,x=o.lastIndexOf,M=Array.isArray,E=Object.keys,_=a.bind;var T=function(t){if(t instanceof T)return t;if(!(this instanceof T))return new T(t);this._wrapped=t};if(typeof n!=="undefined"){if(typeof e!=="undefined"&&e.exports){n=e.exports=T}n._=T}else{t._=T}T.VERSION="1.4.4";var C=T.each=T.forEach=function(t,e,n){if(t==null)return;if(p&&t.forEach===p){t.forEach(e,n)}else if(t.length===+t.length){for(var i=0,o=t.length;i<o;i++){if(e.call(n,t[i],i,t)===r)return}}else{for(var s in t){if(T.has(t,s)){if(e.call(n,t[s],s,t)===r)return}}}};T.map=T.collect=function(t,e,n){var i=[];if(t==null)return i;if(d&&t.map===d)return t.map(e,n);C(t,function(t,r,o){i[i.length]=e.call(n,t,r,o)});return i};var S="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(t,e,n,i){var r=arguments.length>2;if(t==null)t=[];if(v&&t.reduce===v){if(i)e=T.bind(e,i);return r?t.reduce(e,n):t.reduce(e)}C(t,function(t,o,s){if(!r){n=t;r=true}else{n=e.call(i,n,t,o,s)}});if(!r)throw new TypeError(S);return n};T.reduceRight=T.foldr=function(t,e,n,i){var r=arguments.length>2;if(t==null)t=[];if(m&&t.reduceRight===m){if(i)e=T.bind(e,i);return r?t.reduceRight(e,n):t.reduceRight(e)}var o=t.length;if(o!==+o){var s=T.keys(t);o=s.length}C(t,function(a,u,c){u=s?s[--o]:--o;if(!r){n=t[u];r=true}else{n=e.call(i,n,t[u],u,c)}});if(!r)throw new TypeError(S);return n};T.find=T.detect=function(t,e,n){var i;A(t,function(t,r,o){if(e.call(n,t,r,o)){i=t;return true}});return i};T.filter=T.select=function(t,e,n){var i=[];if(t==null)return i;if(g&&t.filter===g)return t.filter(e,n);C(t,function(t,r,o){if(e.call(n,t,r,o))i[i.length]=t});return i};T.reject=function(t,e,n){return T.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)};T.every=T.all=function(t,e,n){e||(e=T.identity);var i=true;if(t==null)return i;if(y&&t.every===y)return t.every(e,n);C(t,function(t,o,s){if(!(i=i&&e.call(n,t,o,s)))return r});return!!i};var A=T.some=T.any=function(t,e,n){e||(e=T.identity);var i=false;if(t==null)return i;if(w&&t.some===w)return t.some(e,n);C(t,function(t,o,s){if(i||(i=e.call(n,t,o,s)))return r});return!!i};T.contains=T.include=function(t,e){if(t==null)return false;if(b&&t.indexOf===b)return t.indexOf(e)!=-1;return A(t,function(t){return t===e})};T.invoke=function(t,e){var n=c.call(arguments,2);var i=T.isFunction(e);return T.map(t,function(t){return(i?e:t[e]).apply(t,n)})};T.pluck=function(t,e){return T.map(t,function(t){return t[e]})};T.where=function(t,e,n){if(T.isEmpty(e))return n?null:[];return T[n?"find":"filter"](t,function(t){for(var n in e){if(e[n]!==t[n])return false}return true})};T.findWhere=function(t,e){return T.where(t,e,true)};T.max=function(t,e,n){if(!e&&T.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.max.apply(Math,t)}if(!e&&T.isEmpty(t))return-Infinity;var i={computed:-Infinity,value:-Infinity};C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>=i.computed&&(i={value:t,computed:s})});return i.value};T.min=function(t,e,n){if(!e&&T.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.min.apply(Math,t)}if(!e&&T.isEmpty(t))return Infinity;var i={computed:Infinity,value:Infinity};C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})});return i.value};T.shuffle=function(t){var e;var n=0;var i=[];C(t,function(t){e=T.random(n++);i[n-1]=i[e];i[e]=t});return i};var P=function(t){return T.isFunction(t)?t:function(e){return e[t]}};T.sortBy=function(t,e,n){var i=P(e);return T.pluck(T.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria;var i=e.criteria;if(n!==i){if(n>i||n===void 0)return 1;if(n<i||i===void 0)return-1}return t.index<e.index?-1:1}),"value")};var k=function(t,e,n,i){var r={};var o=P(e||T.identity);C(t,function(e,s){var a=o.call(n,e,s,t);i(r,a,e)});return r};T.groupBy=function(t,e,n){return k(t,e,n,function(t,e,n){(T.has(t,e)?t[e]:t[e]=[]).push(n)})};T.countBy=function(t,e,n){return k(t,e,n,function(t,e){if(!T.has(t,e))t[e]=0;t[e]++})};T.sortedIndex=function(t,e,n,i){n=n==null?T.identity:P(n);var r=n.call(i,e);var o=0,s=t.length;while(o<s){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o};T.toArray=function(t){if(!t)return[];if(T.isArray(t))return c.call(t);if(t.length===+t.length)return T.map(t,T.identity);return T.values(t)};T.size=function(t){if(t==null)return 0;return t.length===+t.length?t.length:T.keys(t).length};T.first=T.head=T.take=function(t,e,n){if(t==null)return void 0;return e!=null&&!n?c.call(t,0,e):t[0]};T.initial=function(t,e,n){return c.call(t,0,t.length-(e==null||n?1:e))};T.last=function(t,e,n){if(t==null)return void 0;if(e!=null&&!n){return c.call(t,Math.max(t.length-e,0))}else{return t[t.length-1]}};T.rest=T.tail=T.drop=function(t,e,n){return c.call(t,e==null||n?1:e)};T.compact=function(t){return T.filter(t,T.identity)};var I=function(t,e,n){C(t,function(t){if(T.isArray(t)){e?u.apply(n,t):I(t,e,n)}else{n.push(t)}});return n};T.flatten=function(t,e){return I(t,e,[])};T.without=function(t){return T.difference(t,c.call(arguments,1))};T.uniq=T.unique=function(t,e,n,i){if(T.isFunction(e)){i=n;n=e;e=false}var r=n?T.map(t,n,i):t;var o=[];var s=[];C(r,function(n,i){if(e?!i||s[s.length-1]!==n:!T.contains(s,n)){s.push(n);o.push(t[i])}});return o};T.union=function(){return T.uniq(l.apply(o,arguments))};T.intersection=function(t){var e=c.call(arguments,1);return T.filter(T.uniq(t),function(t){return T.every(e,function(e){return T.indexOf(e,t)>=0})})};T.difference=function(t){var e=l.apply(o,c.call(arguments,1));return T.filter(t,function(t){return!T.contains(e,t)})};T.zip=function(){var t=c.call(arguments);var e=T.max(T.pluck(t,"length"));var n=new Array(e);for(var i=0;i<e;i++){n[i]=T.pluck(t,""+i)}return n};T.object=function(t,e){if(t==null)return{};var n={};for(var i=0,r=t.length;i<r;i++){if(e){n[t[i]]=e[i]}else{n[t[i][0]]=t[i][1]}}return n};T.indexOf=function(t,e,n){if(t==null)return-1;var i=0,r=t.length;if(n){if(typeof n=="number"){i=n<0?Math.max(0,r+n):n}else{i=T.sortedIndex(t,e);return t[i]===e?i:-1}}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;i<r;i++)if(t[i]===e)return i;return-1};T.lastIndexOf=function(t,e,n){if(t==null)return-1;var i=n!=null;if(x&&t.lastIndexOf===x){return i?t.lastIndexOf(e,n):t.lastIndexOf(e)}var r=i?n:t.length;while(r--)if(t[r]===e)return r;return-1};T.range=function(t,e,n){if(arguments.length<=1){e=t||0;t=0}n=arguments[2]||1;var i=Math.max(Math.ceil((e-t)/n),0);var r=0;var o=new Array(i);while(r<i){o[r++]=t;t+=n}return o};T.bind=function(t,e){if(t.bind===_&&_)return _.apply(t,c.call(arguments,1));var n=c.call(arguments,2);return function(){return t.apply(e,n.concat(c.call(arguments)))}};T.partial=function(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}};T.bindAll=function(t){var e=c.call(arguments,1);if(e.length===0)e=T.functions(t);C(e,function(e){t[e]=T.bind(t[e],t)});return t};T.memoize=function(t,e){var n={};e||(e=T.identity);return function(){var i=e.apply(this,arguments);return T.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}};T.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)};T.defer=function(t){return T.delay.apply(T,[t,1].concat(c.call(arguments,1)))};T.throttle=function(t,e){var n,i,r,o;var s=0;var a=function(){s=new Date;r=null;o=t.apply(n,i)};return function(){var u=new Date;var c=e-(u-s);n=this;i=arguments;if(c<=0){clearTimeout(r);r=null;s=u;o=t.apply(n,i)}else if(!r){r=setTimeout(a,c)}return o}};T.debounce=function(t,e,n){var i,r;return function(){var o=this,s=arguments;var a=function(){i=null;if(!n)r=t.apply(o,s)};var u=n&&!i;clearTimeout(i);i=setTimeout(a,e);if(u)r=t.apply(o,s);return r}};T.once=function(t){var e=false,n;return function(){if(e)return n;e=true;n=t.apply(this,arguments);t=null;return n}};T.wrap=function(t,e){return function(){var n=[t];u.apply(n,arguments);return e.apply(this,n)}};T.compose=function(){var t=arguments;return function(){var e=arguments;for(var n=t.length-1;n>=0;n--){e=[t[n].apply(this,e)]}return e[0]}};T.after=function(t,e){if(t<=0)return e();return function(){if(--t<1){return e.apply(this,arguments)}}};T.keys=E||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)if(T.has(t,n))e[e.length]=n;return e};T.values=function(t){var e=[];for(var n in t)if(T.has(t,n))e.push(t[n]);return e};T.pairs=function(t){var e=[];for(var n in t)if(T.has(t,n))e.push([n,t[n]]);return e};T.invert=function(t){var e={};for(var n in t)if(T.has(t,n))e[t[n]]=n;return e};T.functions=T.methods=function(t){var e=[];for(var n in t){if(T.isFunction(t[n]))e.push(n)}return e.sort()};T.extend=function(t){C(c.call(arguments,1),function(e){if(e){for(var n in e){t[n]=e[n]}}});return t};T.pick=function(t){var e={};var n=l.apply(o,c.call(arguments,1));C(n,function(n){if(n in t)e[n]=t[n]});return e};T.omit=function(t){var e={};var n=l.apply(o,c.call(arguments,1));for(var i in t){if(!T.contains(n,i))e[i]=t[i]}return e};T.defaults=function(t){C(c.call(arguments,1),function(e){if(e){for(var n in e){if(t[n]==null)t[n]=e[n]}}});return t};T.clone=function(t){if(!T.isObject(t))return t;return T.isArray(t)?t.slice():T.extend({},t)};T.tap=function(t,e){e(t);return t};var F=function(t,e,n,i){if(t===e)return t!==0||1/t==1/e;if(t==null||e==null)return t===e;if(t instanceof T)t=t._wrapped;if(e instanceof T)e=e._wrapped;var r=f.call(t);if(r!=f.call(e))return false;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:t==0?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if(typeof t!="object"||typeof e!="object")return false;var o=n.length;while(o--){if(n[o]==t)return i[o]==e}n.push(t);i.push(e);var s=0,a=true;if(r=="[object Array]"){s=t.length;a=s==e.length;if(a){while(s--){if(!(a=F(t[s],e[s],n,i)))break}}}else{var u=t.constructor,c=e.constructor;if(u!==c&&!(T.isFunction(u)&&u instanceof u&&T.isFunction(c)&&c instanceof c)){return false}for(var l in t){if(T.has(t,l)){s++;if(!(a=T.has(e,l)&&F(t[l],e[l],n,i)))break}}if(a){for(l in e){if(T.has(e,l)&&!s--)break}a=!s}}n.pop();i.pop();return a};T.isEqual=function(t,e){return F(t,e,[],[])};T.isEmpty=function(t){if(t==null)return true;if(T.isArray(t)||T.isString(t))return t.length===0;for(var e in t)if(T.has(t,e))return false;return true};T.isElement=function(t){return!!(t&&t.nodeType===1)};T.isArray=M||function(t){return f.call(t)=="[object Array]"};T.isObject=function(t){return t===Object(t)};C(["Arguments","Function","String","Number","Date","RegExp"],function(t){T["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}});if(!T.isArguments(arguments)){T.isArguments=function(t){return!!(t&&T.has(t,"callee"))}}if(typeof/./!=="function"){T.isFunction=function(t){return typeof t==="function"}}T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))};T.isNaN=function(t){return T.isNumber(t)&&t!=+t};T.isBoolean=function(t){return t===true||t===false||f.call(t)=="[object Boolean]"};T.isNull=function(t){return t===null};T.isUndefined=function(t){return t===void 0};T.has=function(t,e){return h.call(t,e)};T.noConflict=function(){t._=i;return this};T.identity=function(t){return t};T.times=function(t,e,n){var i=Array(t);for(var r=0;r<t;r++)i[r]=e.call(n,r);return i};T.random=function(t,e){if(e==null){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))};var z={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};z.unescape=T.invert(z.escape);var O={escape:new RegExp("["+T.keys(z.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(z.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(t){T[t]=function(e){if(e==null)return"";return(""+e).replace(O[t],function(e){return z[t][e]})}});T.result=function(t,e){if(t==null)return null;var n=t[e];return T.isFunction(n)?n.call(t):n};T.mixin=function(t){C(T.functions(t),function(e){var n=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];u.apply(t,arguments);return L.call(this,n.apply(T,t))}})};var j=0;T.uniqueId=function(t){var e=++j+"";return t?t+e:e};T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/;var D={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var q=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(t,e,n){var i;n=T.defaults({},n,T.templateSettings);var r=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g");var o=0;var s="__p+='";t.replace(r,function(e,n,i,r,a){s+=t.slice(o,a).replace(q,function(t){return"\\"+D[t]});if(n){s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}if(i){s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"}if(r){s+="';\n"+r+"\n__p+='"}o=a+e.length;return e});s+="';\n";if(!n.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){a.source=s;throw a}if(e)return i(e,T);var u=function(t){return i.call(this,t,T)};u.source="function("+(n.variable||"obj")+"){\n"+s+"}";return u};T.chain=function(t){return T(t).chain()};var L=function(t){return this._chain?T(t).chain():t};T.mixin(T);C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];T.prototype[t]=function(){var n=this._wrapped;e.apply(n,arguments);if((t=="shift"||t=="splice")&&n.length===0)delete n[0];return L.call(this,n)}});C(["concat","join","slice"],function(t){var e=o[t];T.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}});T.extend(T.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)},{}],25:[function(t,e,n){if(typeof window!=="undefined"&&typeof window.requestAnimationFrame!=="function"){window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}}Leap=t("../lib/index")},{"../lib/index":11}]},{},[25]);(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1};if(!window){throw new Error("For web browser only!!")}window.svgSprites=function(){var e,n,i,r,o,s,a,u;u={};i=[];a=this;s=function(t){var e,n,i,r,o,s,a,u,c;if(!t){throw new Error("Request Options is required")}s=t.url;i=t.async||true;a=t.user||"";r=t.password||"";o=t.timeout||0;if(!s){throw new Error("Request URL is required")}u=t.success;n=t.error;e=t.complete;c=new XMLHttpRequest;c.timeout=o;c.ontimeout=function(){return console.error("The request for "+s+" timed out.")};c.onreadystatechange=function(){if(c.readyState===XMLHttpRequest.DONE){if(c.status===200){if(typeof u==="function"){u(c.response,c.status)}}else{if(typeof n==="function"){n(c.response,c.status)}}if(typeof e==="function"){e(c.response,c.status)}}};c.open("GET",s,i,a,r);c.setRequestHeader("Accept","text/xml");return c.send()};r=function(t){var e;e=i.indexOf(t);
if(e>-1){i.splice(e,1)}};e=function(e,n){var i,r,o,s,a,c,l,f,h;o=document.createElement("div");o.innerHTML=e;f=o.querySelectorAll("[id]");u[n]={};for(s=0,a=f.length;s<a;s++){l=f[s];try{h=l.getAttribute("viewBox");if(!h){continue}if(c=l.id,t.call(u[n],c)<0){u[n][l.id]={children:function(){var t,e,n,r;n=l.childNodes;r=[];for(t=0,e=n.length;t<e;t++){i=n[t];if(i.nodeType===1){r.push(i)}}return r}(),view:h}}else{throw new Error("SVG ID is duplicated!!")}}catch(p){r=p;console.error(r)}}};n=function(t){var e,n,i;e=t&&typeof t==="object"&&t!==null;n=t.nodeType===1&&typeof t.nodeName==="string";i=e&&n;return i};o=function(t){var e,i,r,o,s,a,c,l,f,h,p,d,v;if(!t||!n(t)){t=document}if(t.nodeName.toUpperCase()==="SVG"&&t.getAttribute("svg-sprite")){p=[t]}else{p=t.querySelectorAll("svg[svg-sprite]")}for(o=0,c=p.length;o<c;o++){h=p[o];d=h.getAttribute("svg-sprite");if(!d){continue}v=d.split(":");if(v.length<2){continue}i=v[0];s=v[1];r=u[i];while(h.firstChild){h.removeChild(h.firstChild)}if(s&&r&&r.hasOwnProperty(s)){f=r[s].children;for(a=0,l=f.length;a<l;a++){e=f[a];h.appendChild(e.cloneNode(true))}h.setAttribute("viewBox",r[s].view)}else{console.error("SVG Sprite '"+d+"' not found:");console.log(i,s);console.log(u,r)}}};this.load=function(t,n){if(!n){n=t.replace(/^.*[\\\/]/,"")}i.push(t);console.log("SVG Sprites load "+t+" ["+n+"]");s({type:"GET",url:t,success:function(i){e(i,n);return r(t)},error:function(e,n){console.error("Ajax error! "+n,e);r(t)}})};this.render=function(t,e){var n;if(!e){e=3e4}e=(new Date).getTime()+e;n=setInterval(function(){var r;try{if(i.length<=0){clearInterval(n);o(t)}if((new Date).getTime()>e){clearInterval(n);throw new Error("SVG Sprites render timeout!!")}}catch(s){r=s;return console.error(r)}},100)};return this}}).call(this);(function(){var t,e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1};t=function(){var t,e,n,i,r,o,s,a;n=$("[duplicate]");s=[];for(i=0,r=n.length;i<r;i++){e=n[i];a=parseInt($(e).attr("duplicate"));t=0;o=$(e).parent();s.push(function(){var n;n=[];while(t<a-1){o.append($(e).clone());n.push(t++)}return n}())}return s};$(document).ready(function(){var n,i,r,o,s,a,u,c,l,f,h,p,d,v,m,g,y,w,b,x,M,E,_,T,C,S,A,P,k,I,F,z,O,j,N,D,q;I=new svgSprites;I.load("svgdefs.svg","base");I.render();t();D=0;z=0;o=function(){var t,e,n;e=this;n=$("#menu").find("svg");t=$("#logo").find("svg");this.menu=function(e){var i,r;if(D!==0||!e){D=0;i=n.data("last");if(i){n.data("last","");n.attr("svg-sprite",i);I.render(n)}return t.removeClass("hide")}else{D=e==="close"?1:2;i=n.data(e);r=n.attr("svg-sprite")||"";n.data("last",r);n.attr("svg-sprite",i);I.render(n);if(D===2){return t.addClass("hide")}else{return t.removeClass("hide")}}};this.show=function(){if(c.attr("dark")!==null&&D!==1){return $("#header").addClass("dark")}else{return $("#header").removeClass("dark")}};return this};i=function(){var t,e;e=this;t=$("#detail");this.show=function(e){if(l.attr("dark")!==null){t.addClass("dark")}else{t.removeClass("dark")}t.html(e);return t.addClass("open")};this.hide=function(){return t.removeClass("open")};this.toggle=function(){if(t.hasClass("open")){return e.hide()}else{return e.show()}};return this};s=function(){var t,e,n,i,r,o,s,a,u,c;n=this;u=30;s=$("#slider");o=$("#slider .title");r=$("#slider .slides");a=$("#slider .slider-inner");i=0;c=0;t=$("#slider .btn-next");e=$("#slider .btn-prev");this.isHide=false;t.on("click",function(t){this.blur();return n.next()});e.on("click",function(t){this.blur();return n.prev()});this.resize=function(t){var e,n,i,o,s,c,l,f;l=r.children();f=[];for(o=0,s=l.length;o<s;o++){i=l[o];i.style.maxHeight="";i.style.maxWidth="";e=a.height()-u;n=a.width();if(n>e){c=e/n;i.style.maxHeight=e+"px";f.push(i.style.maxWidth=n*c+"px")}else{c=n/e;i.style.maxHeight=e*c+"px";f.push(i.style.maxWidth=n+"px")}}return f};this.slide=function(t){var e,n;n=r.children();e=r.find(".current");if(e&&n.length>0){e.removeClass("current")}$(n[t]).addClass("current")};this.next=function(){if(D!==2||n.isHide){return}if(i>=c-1){i=0}else{i+=1}return n.slide(i)};this.prev=function(){if(D!==2||n.isHide){return}if(i<=0){i=c-1}else{i-=1}return n.slide(i)};this.show=function(t,e){if(l.attr("dark")!==null){s.addClass("dark")}else{s.removeClass("dark")}o.html(e||"");t=t.clone();r.children().remove();r.append(t);$(t[0]).addClass("current");i=0;c=t.length;n.resize();s.addClass("open");return window.addEventListener("resize",n.resize)};this.hide=function(){s.removeClass("open");return window.removeEventListener("resize",n.resize)};this.toggle=function(){if(s.hasClass("open")){return n.hide()}else{return n.show()}};return this};r=function(){var t,e,n,i;i=this;n=$("#controller");t=$("#controller .btn-next");e=$("#controller .btn-prev");t.on("click",function(t){i.next();return this.blur()});e.on("click",function(t){i.prev();return this.blur()});this.isHide=false;this.hide=function(){t.addClass("hide");return e.addClass("hide")};this.show=function(){if(D!==0){e.addClass("hide");t.addClass("hide");return}if(u>0){e.removeClass("hide")}else{e.addClass("hide")}if(u<F-1){t.removeClass("hide")}else{t.addClass("hide")}if(c.attr("dark")!==null){return n.addClass("dark")}else{return n.removeClass("dark")}};this.next=function(){if(D===2){return}if(f>=F-1){return}return C(f+=1)};this.prev=function(){if(D===2){return}if(f<=0){return}return C(f-=1)};this.toggle=function(){if(t.hasClass("hide")||e.hasClass("hide")){return i.show()}else{return i.hide()}};i.hide();i.show();return this};S=$("#pages > section:not([disabled])");for(d=0,w=S.length;d<w;d++){_=S[d];$(_).append("<label>"+_.title+"</label>")}F=S.length;if(F>0){l=$(S[0])}else{l=null}f=0;u=0;c=l;k=function(){var t;S.addClass("no-transition");return t=window.setTimeout(function(){S.removeClass("no-transition");return window.clearTimeout(t)},50)};window.addEventListener("resize",function(t){k();return C(f)});C=function(t){var e,n,i,r,o;if(!t){t=0}o=$(document).width();u=t;for(n=0,i=S.length;n<i;n++){_=S[n];e=$(_).index();if(e===t){c=l=$(_)}r=o*(e-t);$(_).css({left:r+"px"})}p.show();return A.show()};T=function(t,e){var n,i,r,o,s,a;S.addClass("on-moving");if(!t){return}a=$(document).width();r=null;for(i=0,o=S.length;i<o;i++){_=S[i];n=$(_).index();s=Math.round(a*n+t-a*e);$(_).css({left:s+"px"});if(!r||Math.abs(s)<Math.abs(r)){r=s;u=n;c=$(_)}}S.removeClass("on-moving");p.show();return A.show()};p=new o;A=new r;h=new i;P=new s;$("#menu").on("click",function(t){this.blur();p.menu("close");$("#pages").toggleClass("zoom").removeClass("out");h.hide();P.hide();if(D===1){$("#footer").removeClass("hide")}else{$("#footer").addClass("hide")}p.show();A.toggle()});$(".open-detail").on("click",function(t){var e,n,i;p.menu("collapse");$("#pages").toggleClass("zoom").toggleClass("out");$("#footer").addClass("hide");i=$(this).data("detail");if(i){n=$("#"+i+'[rel="detail"]')}else{n=$(this).find('[rel="detail"]')}if(n){e=n.html()}else{e=""}h.show(e);A.hide();p.show()});$(".open-slider").on("click",function(t){var e,n;p.menu("collapse");$("#pages").toggleClass("zoom").toggleClass("out");$("#footer").addClass("hide");e=$(this).find('[rel="slides"]');n=e.attr("title");if(!e){return}P.show(e.children(),n);A.hide();p.show();t.stopPropagation();return false});a={prev:function(){return A.prev()},next:function(){return A.next()},slide_prev:function(){return P.prev()},slide_next:function(){return P.next()},enter:function(){return $("#menu").trigger("click")},esc:function(){p.menu();$("#pages").removeClass("zoom").removeClass("out");h.hide();P.hide();$("#footer").addClass("hide");A.show();return p.show()}};$(document).on("keydown",function(t){var e,n,i;if((e=t.keyCode)===37||e===38){if(D!==2){return a.prev()}else{return a.slide_prev()}}else if((n=t.keyCode)===39||n===40){if(D!==2){return a.next()}else{return a.slide_next()}}else if((i=t.keyCode)===13||i===32){return a.enter()}else if(t.keyCode===27){return a.esc()}});q=null;$(document).on("wheel",function(t){var e;e=Math.round(t.deltaY/5);if(e===0){return}if(q){window.clearTimeout(q)}return q=window.setTimeout(function(){if(D===2){if(e>0){return a.slide_next()}else{return a.slide_prev()}}else{if(e>0){return a.next()}else{return a.prev()}}},60)});j=document.getElementById("screen");N=document.getElementById("slider");O=document.getElementById("detail");x=new Hammer(j);E=new Hammer(N);E.get("swipe").set({direction:Hammer.DIRECTION_ALL});M=new Hammer(O);M.get("swipe").set({direction:Hammer.DIRECTION_ALL});m=function(t){var e,n,i,r;r=$("[no-touch-pan]");for(n=0,i=r.length;n<i;n++){e=r[n];if($.contains(e,t)){return false}}return true};x.on("panleft panright",function(t){var e,n,i,r,o;if(D===2&&m(t.target)){return}if(D===0){r=2}else if(D===1){r=4}i=t.deltaX*r;o=$(document).width();if(i>=0){e=f*o+Math.ceil(o/10);if(i>e){i=e}}else{n=(f-F+1)*o-Math.ceil(o/10);if(i<n){i=n}}T(i,f)});x.on("panend",function(t){if(D===2&&m(t.target)){return}f=u;C(f)});x.on("tap pressup",function(t){var n,i,r;if(r=t.target,e.call(S,r)<0){return}i=t.target;if(D!==1||!i){return}n=$(i).index();if(n===f){return $("#menu").trigger("click")}else{f=n;return C(f)}});E.on("swipedown",function(t){if(D!==2){return}return a.esc()});E.on("swipeleft swiperight",function(t){if(D!==2){return}switch(t.type){case"swipeleft":a.slide_next();break;case"swiperight":a.slide_prev()}});M.on("swipedown",function(t){if(D!==2){return}return a.esc()});y=0;n=30;g=Leap.loop({enableGestures:true},function(t){var e,i,r;if(y>0){y--;return}if(t.valid&&t.gestures.length>0){e=t.gestures[t.gestures.length-1];switch(e.type){case"circle":a.esc();y=n;break;case"swipe":i=Math.abs(e.direction[0])>Math.abs(e.direction[1]);if(i){if(e.direction[0]>0){r="right";a.prev()}else{r="left";a.next()}}else{if(e.direction[1]>0){r="up";a.esc()}else{r="down";a.enter()}}console.log("Swipe Gesture",r);y=n;break}}});k();C();v=window.setInterval(function(t){var e,n,i,r,o,s,a;a=$("#swapper > *");n=0;for(i=0,r=a.length;i<r;i++){s=a[i];if($(s).hasClass("onswap")){n=$(s).index();break}}e=a[n];$(e).removeClass("onswap");if(n>=a.length-1){n=0}else{n++}o=a[n];return $(o).addClass("onswap")},3e3);return b=window.setTimeout(function(t){$("#loader").addClass("hide");return window.clearTimeout(b)},1200)})}).call(this);
